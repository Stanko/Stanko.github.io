<!doctype html><html class=blue lang=en><head><meta charset=utf-8><meta content="width=device-width,initial-scale=1.0" name=viewport><title>Draw SVG rope using JavaScript · Muffin Man</title><meta content="

This is an interactive article. To fully experience it, you'll need to turn JavaScript on.

Today, I'll take you through the process I came up with …" name=description><meta content="Muffin Man" property=og:site_name><meta content="Draw SVG rope using JavaScript" property=og:title><meta content="

This is an interactive article. To fully experience it, you'll need to turn JavaScript on.

Today, I'll take you through the process I came up with …" property=og:description><meta content=https://muffinman.io/blog/draw-svg-rope-using-javascript/ property=og:url><meta content="Draw SVG rope using JavaScript" name=twitter:title><meta content="

This is an interactive article. To fully experience it, you'll need to turn JavaScript on.

Today, I'll take you through the process I came up with …" name=twitter:description><meta content=https://muffinman.io/img/rope/cover.png property=twitter:image><meta content=https://muffinman.io/img/rope/cover.png property=og:image><link href=/favicon/blue/icon-32.ico rel=icon sizes=any><link href=/favicon/blue/icon.svg rel=icon type=image/svg+xml><link href=/favicon/blue/icon-180.png rel=apple-touch-icon><link href=/favicon/blue/manifest.webmanifest rel=manifest><link href=/style.css rel=stylesheet><link href=/atom.xml rel=alternate title=RSS type=application/rss+xml><script>var isSystemDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
    var userSelected = localStorage.getItem('color-scheme');
    var scheme = 'light-scheme';
    if (userSelected) { scheme = userSelected } else if (isSystemDark) { scheme = 'dark-scheme'; }
    document.documentElement.classList.add(scheme);</script><body><div id=page><a class=jump-to-content href=#content>Jump to content</a><header class=menu><div class=container><a aria-label=Home class=menu__logo href=/> <svg viewbox="0 0 40 20" aria-hidden=true class=logo xmlns=http://www.w3.org/2000/svg><lineargradient id=logo-gradient><stop offset=0% stop-color=var(--gradient-color-1) /><stop offset=70% stop-color=var(--gradient-color-2) /></lineargradient><path d="M19.79.5h-2.603c-2.56 0-5.04 1.377-6.003 2.754C10.22 1.877 7.742.5 5.181.5H.5v19h4.681V5.181c1.79.083 3.855 1.35 3.855 3.993V19.5h4.296V9.174c0-2.644 2.065-3.91 3.855-3.993V19.5h5.204V5.181c1.79.083 3.855 1.35 3.855 3.993V19.5h4.296V9.174c0-2.644 2.065-3.91 3.855-3.993V19.5h4.681V.5h-4.68c-2.562 0-5.04 1.377-6.004 2.754C27.43 1.877 24.952.5 22.391.5Z" fill=url(#logo-gradient) stroke-linecap=round stroke-linejoin=round stroke-width=2px vector-effect=non-scaling-stroke /></svg> </a><button title="Switch color scheme" class=color-scheme-switcher><span aria-label="Switch to the dark color scheme" class=color-scheme-switcher__to-dark> <svg viewbox="0 0 20 20" aria-hidden=true height=20 width=20><path d="M19 11.6424L19.982 11.8312C20.0687 11.3804 19.8373 10.9286 19.4211 10.7354C19.0048 10.5421 18.5104 10.6571 18.222 11.0142L19 11.6424ZM8.35755 1L8.98583 1.77799C9.34289 1.48963 9.45783 0.995241 9.26458 0.578948C9.07134 0.162655 8.61953 -0.068649 8.16882 0.0179715L8.35755 1ZM18.222 11.0142C17.0163 12.5071 15.1742 13.4591 13.109 13.4591V15.4591C15.804 15.4591 18.2089 14.2136 19.778 12.2707L18.222 11.0142ZM13.109 13.4591C9.48151 13.4591 6.54086 10.5185 6.54086 6.89102H4.54086C4.54086 11.6231 8.37694 15.4591 13.109 15.4591V13.4591ZM6.54086 6.89102C6.54086 4.8258 7.49287 2.98365 8.98583 1.77799L7.72927 0.222011C5.78634 1.79106 4.54086 4.19595 4.54086 6.89102H6.54086ZM2 9.91827C2 5.98059 4.81714 2.69872 8.54628 1.98203L8.16882 0.0179715C3.51562 0.912252 0 5.00362 0 9.91827H2ZM10.0817 18C5.61831 18 2 14.3817 2 9.91827H0C0 15.4863 4.51374 20 10.0817 20V18ZM18.018 11.4537C17.3013 15.1829 14.0194 18 10.0817 18V20C14.9964 20 19.0878 16.4844 19.982 11.8312L18.018 11.4537Z" fill=currentColor /></svg> </span> <span aria-label="Switch to the light color scheme" class=color-scheme-switcher__to-light> <svg viewbox="0 0 26 26" aria-hidden=true height=26 width=26><g fill=none stroke=currentColor stroke-linecap=round stroke-width=2><circle cx=13 cy=13 r=5 /><path d="M13 4V1.5"/><path d="M13 24.5V22"/><path d="M4 13H1.5"/><path d="M24.5 13H22"/><path d="M6.63604 6.63604L4.86827 4.86827"/><path d="M21.1317 21.1317L19.364 19.364"/><path d="M6.63604 19.364L4.86827 21.1317"/><path d="M21.1317 4.86828L19.364 6.63605"/></g></svg> </span></button><nav class="nav nav--header"><a class="nav__item nav__item--with-icon" href=/art/> Art </a><span aria-hidden=true>/</span><a class=nav__item href=/archive/> Blog </a><span aria-hidden=true>/</span><a class=nav__item href=/about/> About </a><span aria-hidden=true>/</span><a class="nav__item nav__stats" href=/stats/> Stats </a><span aria-hidden=true class=nav__stats>/</span><button class="nav__item nav__item--with-icon" data-micromodal-trigger=modal-menu>Search <svg viewbox="0 0 20 32" aria-hidden=true class=nav__search-icon height=16 width=10 xmlns=http://www.w3.org/2000/svg><g fill=none stroke=currentColor stroke-linecap=round stroke-width=3><circle cx=10 cy=10 r=10 /><path d="M 10 20 L 10 32"/></g></svg></button></nav><button class="menu__toggle menu__toggle--static" aria-label=Menu data-micromodal-trigger=modal-menu><span></span> <span></span> <span></span></button></div><div class="menu__toggle-fixed-wrapper menu__toggle-fixed-wrapper--hidden"><button class="menu__toggle menu__toggle--fixed" aria-label=Menu data-micromodal-trigger=modal-menu tabindex=-1><span></span> <span></span> <span></span></button></div></header><div class=menu-stripe></div><section class=main id=content role=main tabindex=-1><div class=post__top><div class="container post__top-content"><h1 class=post__title>Draw <span>SVG rope</span> using JavaScript</h1><div class=post__date>23. December 2022</div><div class=post__info><div>Posted in <a href=/archive/#javascript>JavaScript</a></div><span class=post__info-separator>·</span> 15 minutes read <div class=post__comments-link></div></div></div></div><div class=keyboard-svg-wrapper><svg viewbox="0 0 609 242" aria-hidden=true class=keyboard-svg xmlns=http://www.w3.org/2000/svg><g fill=#FFFFFF fill-rule=evenodd stroke=none stroke-width=1><rect class=key height=37 id=key--q rx=6 width=36 x=52 y=70></rect><rect class=key height=37 id=key--w rx=6 width=36 x=95 y=70></rect><rect class=key height=37 id=key--e rx=6 width=36 x=138 y=70></rect><rect class=key height=37 id=key--r rx=6 width=36 x=182 y=70></rect><rect class=key height=37 id=key--t rx=6 width=36 x=225 y=70></rect><rect class=key height=37 id=key--y rx=6 width=36 x=269 y=70></rect><rect class=key height=37 id=key--u rx=6 width=36 x=312 y=70></rect><rect class=key height=37 id=key--i rx=6 width=36 x=356 y=70></rect><rect class=key height=37 id=key--o rx=6 width=36 x=399 y=70></rect><rect class=key height=37 id=key--p rx=6 width=36 x=442 y=70></rect><rect class=key height=37 id=key--squareBracketLeft rx=6 width=36 x=486 y=70></rect><rect class=key height=37 id=key--squareBracketRight rx=6 width=36 x=529 y=70></rect><rect class=key height=37 id=key--backslash rx=6 width=36 x=573 y=70></rect><rect class=key height=37 id=key--tilde rx=6 width=36 x=1 y=25></rect><rect class=key height=37 id=key--1 rx=6 width=36 x=44 y=25></rect><rect class=key height=37 id=key--2 rx=6 width=36 x=88 y=25></rect><rect class=key height=37 id=key--3 rx=6 width=36 x=131 y=25></rect><rect class=key height=37 id=key--4 rx=6 width=36 x=175 y=25></rect><rect class=key height=37 id=key--5 rx=6 width=36 x=218 y=25></rect><rect class=key height=37 id=key--6 rx=6 width=36 x=262 y=25></rect><rect class=key height=37 id=key--7 rx=6 width=36 x=305 y=25></rect><rect class=key height=37 id=key--8 rx=6 width=36 x=348 y=25></rect><rect class=key height=37 id=key--9 rx=6 width=36 x=392 y=25></rect><rect class=key height=37 id=key--0 rx=6 width=36 x=435 y=25></rect><rect class=key height=37 id=key--minus rx=6 width=36 x=479 y=25></rect><rect class=key height=37 id=key--equals rx=6 width=36 x=522 y=25></rect><rect class=key height=18 id=key--esc rx=6 width=37 x=1 y=0></rect><rect class=key height=18 id=key--f1 rx=6 width=37 x=45 y=0></rect><rect class=key height=18 id=key--f2 rx=6 width=37 x=89 y=0></rect><rect class=key height=18 id=key--f3 rx=6 width=37 x=133 y=0></rect><rect class=key height=18 id=key--f4 rx=6 width=37 x=176 y=0></rect><rect class=key height=18 id=key--f5 rx=6 width=37 x=221 y=0></rect><rect class=key height=18 id=key--f6 rx=6 width=37 x=264 y=0></rect><rect class=key height=18 id=key--f7 rx=6 width=37 x=308 y=0></rect><rect class=key height=18 id=key--f8 rx=6 width=37 x=352 y=0></rect><rect class=key height=18 id=key--f9 rx=6 width=37 x=396 y=0></rect><rect class=key height=18 id=key--f10 rx=6 width=37 x=440 y=0></rect><rect class=key height=18 id=key--f11 rx=6 width=37 x=484 y=0></rect><rect class=key height=18 id=key--f12 rx=6 width=37 x=528 y=0></rect><rect class=key height=18 id=key--power rx=6 width=37 x=572 y=0></rect><rect class=key height=37 id=key--delete rx=6 width=43 x=566 y=25></rect><rect class=key height=37 id=key--a rx=6 width=36 x=65 y=114></rect><rect class=key height=37 id=key--s rx=6 width=36 x=109 y=114></rect><rect class=key height=37 id=key--d rx=6 width=36 x=152 y=114></rect><rect class=key height=37 id=key--f rx=6 width=36 x=195 y=114></rect><rect class=key height=37 id=key--g rx=6 width=36 x=239 y=114></rect><rect class=key height=37 id=key--h rx=6 width=36 x=282 y=114></rect><rect class=key height=37 id=key--j rx=6 width=36 x=326 y=114></rect><rect class=key height=37 id=key--k rx=6 width=36 x=369 y=114></rect><rect class=key height=37 id=key--l rx=6 width=36 x=413 y=114></rect><rect class=key height=37 id=key--semicolon rx=6 width=36 x=456 y=114></rect><rect class=key height=37 id=key--apostrophe rx=6 width=36 x=500 y=114></rect><rect class=key height=37 id=key--z rx=6 width=36 x=88 y=158></rect><rect class=key height=37 id=key--x rx=6 width=36 x=131 y=158></rect><rect class=key height=37 id=key--c rx=6 width=36 x=175 y=158></rect><rect class=key height=37 id=key--v rx=6 width=36 x=218 y=158></rect><rect class=key height=37 id=key--b rx=6 width=36 x=262 y=158></rect><rect class=key height=37 id=key--n rx=6 width=36 x=305 y=158></rect><rect class=key height=37 id=key--m rx=6 width=36 x=348 y=158></rect><rect class=key height=37 id=key--comma rx=6 width=36 x=392 y=158></rect><rect class=key height=37 id=key--dot rx=6 width=36 x=435 y=158></rect><rect class=key height=37 id=key--slash rx=6 width=36 x=479 y=158></rect><rect class=key height=37 id=key--fn rx=6 width=33 x=0 y=203></rect><rect class=key height=37 id=key--controlLeft rx=6 width=33 x=41 y=203></rect><rect class=key height=37 id=key--altLeft rx=6 width=33 x=81 y=203></rect><rect class=key height=37 id=key--altRight rx=6 width=33 x=444 y=203></rect><rect class=key height=19 id=key--arrowLeft rx=6 width=37 x=485 y=221></rect><g transform="translate(529.000000, 203.000000)" class=key id=key--arrowUp><path d="M37,11.5 L37,6 C37,2.6862915 34.3137085,-6.08718376e-16 31,0 L6,0 L6,0 C2.6862915,6.08718376e-16 -4.05812251e-16,2.6862915 0,6 L0,6 L0,11.5 L0,19 L37,19 L37,11.5 Z"></path></g><g transform="translate(529.000000, 222.000000)" class=key id=key--arrowDown><path d="M37,7.5 L37,13 C37,16.3137085 34.3137085,19 31,19 L6,19 C2.6862915,19 4.05812251e-16,16.3137085 0,13 L0,7.5 L0,0 L37,0 L37,7.5 Z"></path></g><rect class=key height=19 id=key--arrowRight rx=6 width=36 x=573 y=221></rect><rect class=key height=37 id=key--enter rx=6 width=66 x=543 y=114></rect><rect class=key height=37 id=key--cmdLeft rx=6 width=45 x=122 y=203></rect><rect class=key height=37 id=key--cmdRight rx=6 width=45 x=392 y=203></rect><rect class=key height=37 id=key--shiftRight rx=6 width=87 x=522 y=158></rect><rect class=key height=37 id=key--tab rx=6 width=44 x=0 y=70></rect><rect class=key height=37 id=key--capsLock rx=6 width=57 x=0 y=114></rect><rect class=key height=37 id=key--shiftLeft rx=6 width=80 x=0 y=158></rect><rect class=key height=37 id=key--space rx=6 width=210 x=175 y=203></rect></g></svg></div><div class="container post__container"><div class=content><link href=/posts/rope.css rel=stylesheet><noscript><p>This is an interactive article. To fully experience it, you'll need to turn JavaScript on.</p></noscript><p>Today, I'll take you through the process I came up with to transform an SVG path into a vector rope drawing.<p>We'll learn how to turn the path on the left into the rope on the right: <img alt="SVG path and a rope drawing created from it" class="image image--lg" src=/img/rope/path-to-rope.png><p>The problem popped up on a project my colleagues were working on, and it stuck with me. I thought about it and started playing with it as soon as I got some free time. I had a lot of fun. Therefore I want to share the process with you.<p>Please note that this is not a coding tutorial but a detailed overview of each step. But don't worry, the code is fully available.<p>If you feel impatient, you can jump to the <a href=https://muffinman.io/blog/draw-svg-rope-using-javascript/#demo>interactive demo</a> or check the code <a href=https://codepen.io/stanko/pen/vYaEMKX>on CodePen</a>. But I heartily recommend you read the whole thing first.<h2 id=idea>Idea<a aria-label="Anchor link for: idea" title="Anchor link for: idea" class=header-anchor href=#idea> <span aria-hidden=true class=sr-only>#</span></a></h2><p>Looking at this close-up photo of a rope, we can see it consists of multiple strands twisted around each other. Visually, they split the rope into segments. Each segment's 2D projection resembles a curved polygon.<p>Our goal will be to create these polygons using JavaScript.<p>We'll start by generating simple rectangular polygons. Then we'll fine-tune them to make them look like actual rope segments.<p><img alt="Close-up photo of a rope" src=/img/rope/close-up.jpg><h3 id=how-to-approach-problems-like-this>How to approach problems like this<a aria-label="Anchor link for: how-to-approach-problems-like-this" title="Anchor link for: how-to-approach-problems-like-this" class=header-anchor href=#how-to-approach-problems-like-this> <span aria-hidden=true class=sr-only>#</span></a></h3><p>I think this is one of the problems a child can solve and draw on paper. But at the same time, breaking it down and turning it into code is hard.<p>I've seen many junior developers struggle with similar problems. Usually, it starts with them diving into coding right away. Then they entangle themselves in their code and get stuck. And that is why it is so important to <span class=sidenote__trigger role=button tabindex=0> solve the problem first. </span> <span class=sidenote__note><span class=sidenote__bracket>(</span>I bore my mentees to death by repeating that programming is problem-solving, while code is just a tool to implement those solutions.<span class=sidenote__bracket>)</span></span><p>I'm a visual thinker. For me drawing things on paper makes a problem easier to solve. I would suggest you try the same. Keep a pen and paper near your computer and reach out for them before you start typing code.<p>After doodling ropes for a while, I was satisfied with the image you can see in the bottom right on the left page:</p><img alt="My notebook with sketches I draw while solving the problem" class="image image--md" src=/img/rope/notebook.jpg><p>It is not perfect, but it is straightforward and easy to code. That's why I selected it as a starting point, and only then I started coding.<h2 id=the-process>The process<a aria-label="Anchor link for: the-process" title="Anchor link for: the-process" class=header-anchor href=#the-process> <span aria-hidden=true class=sr-only>#</span></a></h2><p><small>The image below will stay in the viewport and update as you scroll.</small><div class=steps-wrapper><div class="rope-steps image--md is-in-viewport"><svg viewbox="0 0 500 200" class=rope-svg></svg></div><div class="step-section step-section--path"><h3 id=start-with-an-svg-path>Start with an SVG path<a aria-label="Anchor link for: start-with-an-svg-path" title="Anchor link for: start-with-an-svg-path" class=header-anchor href=#start-with-an-svg-path> <span aria-hidden=true class=sr-only>#</span></a></h3><p>Our goal is to make a program that turns any SVG path into a rope. The program will have to support straight line segments (polylines) and bezier curves.<p>Let's start with a simple curved path shown above.<div class=spoiler><button class="spoiler__toggle btn btn--sm btn--empty" aria-controls=spoiler-1 aria-expanded=false><span class=spoiler__show> Show path's code <span aria-hidden=true>+</span>  </span> <span style="display: none" class=spoiler__hide> Hide path's code <span aria-hidden=true>-</span>  </span></button><div style="display: none" aria-hidden=true class=spoiler__content id=spoiler-1><pre class=language-html data-lang=html style=background-color:#282c34;color:#dcdfe4;><code class=language-html data-lang=html><span><</span><span style=color:#e06c75;>path
</span><span>  </span><span style=color:#e5c07b;>d</span><span>=</span><span style=color:#98c379;>"M 50 150
</span><span style=color:#98c379;>     C 150 150, 150  50, 250  50
</span><span style=color:#98c379;>     C 350  50, 350 150, 450 150"
</span><span>/>
</span></code></pre></div></div><p><span class=step-title id=path></span></div><div class="step-section step-section--points"><h3 id=split-the-path-into-equal-parts>Split the path into equal parts<a aria-label="Anchor link for: split-the-path-into-equal-parts" title="Anchor link for: split-the-path-into-equal-parts" class=header-anchor href=#split-the-path-into-equal-parts> <span aria-hidden=true class=sr-only>#</span></a></h3><p>If we split the path into parts, we can use each piece for one rope segment. To chop the path up, we'll have to go along it and calculate a point on every <code>n</code> pixels.<p>To do so, we'll need a way to get the total length of the path so we know when to stop iterating, as well as the function to get the point at the specific length.<p>Luckily, browsers natively provide us with the methods we need:<ul><li><a href=https://developer.mozilla.org/en-US/docs/Web/API/SVGGeometryElement/getTotalLength>getTotalLength</a> which returns the length of the path.<li><a href=https://developer.mozilla.org/en-US/docs/Web/API/SVGGeometryElement/getPointAtLength>getPointAtLength</a> which returns the point at a given distance along the path.</ul><p>The nice thing is that we don't need to render the path on the page. Both methods work with the path being in memory only.<p>Below is the function I used to calculate these points:<div class=spoiler><button class="spoiler__toggle btn btn--sm btn--empty" aria-controls=spoiler-2 aria-expanded=false><span class=spoiler__show> Show code <span aria-hidden=true>+</span>  </span> <span style="display: none" class=spoiler__hide> Hide code <span aria-hidden=true>-</span>  </span></button><div style="display: none" aria-hidden=true class=spoiler__content id=spoiler-2><pre class=language-js data-lang=js style=background-color:#282c34;color:#dcdfe4;><code class=language-js data-lang=js><span style=color:#c678dd;>function </span><span style=color:#61afef;>getPathPoints</span><span>(</span><span style=color:#e06c75;>d</span><span>, </span><span style=color:#e06c75;>step </span><span style=color:#c678dd;>= </span><span style=color:#e5c07b;>10</span><span>) {
</span><span>  </span><span style=color:#c678dd;>const </span><span style=color:#e06c75;>path </span><span style=color:#c678dd;>= </span><span>document.</span><span style=color:#61afef;>createElementNS</span><span>(</span><span style=color:#98c379;>"http://www.w3.org/2000/svg"</span><span>, </span><span style=color:#98c379;>"path"</span><span>);
</span><span>  </span><span style=color:#e06c75;>path</span><span>.</span><span style=color:#61afef;>setAttribute</span><span>(</span><span style=color:#98c379;>"d"</span><span>, </span><span style=color:#e06c75;>d</span><span>);
</span><span>
</span><span>  </span><span style=color:#c678dd;>const </span><span style=color:#e06c75;>length </span><span style=color:#c678dd;>= </span><span style=color:#e06c75;>path</span><span>.</span><span style=color:#61afef;>getTotalLength</span><span>();
</span><span>
</span><span>  </span><span style=color:#c678dd;>const </span><span style=color:#e06c75;>count </span><span style=color:#c678dd;>= </span><span style=color:#e06c75;>length </span><span style=color:#c678dd;>/ </span><span style=color:#e06c75;>step</span><span>;
</span><span>
</span><span>  </span><span style=color:#c678dd;>const </span><span style=color:#e06c75;>points </span><span style=color:#c678dd;>= </span><span>[];
</span><span>
</span><span>  </span><span style=color:#c678dd;>for </span><span>(</span><span style=color:#c678dd;>let </span><span style=color:#e06c75;>i </span><span style=color:#c678dd;>= </span><span style=color:#e5c07b;>0</span><span>; </span><span style=color:#e06c75;>i </span><span style=color:#c678dd;>< </span><span style=color:#e06c75;>count </span><span style=color:#c678dd;>+ </span><span style=color:#e5c07b;>1</span><span>; </span><span style=color:#e06c75;>i</span><span style=color:#c678dd;>++</span><span>) {
</span><span>    </span><span style=color:#c678dd;>const </span><span style=color:#e06c75;>n </span><span style=color:#c678dd;>= </span><span style=color:#e06c75;>i </span><span style=color:#c678dd;>* </span><span style=color:#e06c75;>step</span><span>;
</span><span>    </span><span style=color:#e06c75;>points</span><span>.</span><span style=color:#61afef;>push</span><span>(</span><span style=color:#e06c75;>path</span><span>.</span><span style=color:#61afef;>getPointAtLength</span><span>(</span><span style=color:#e06c75;>n</span><span>));
</span><span>  }
</span><span>
</span><span>  </span><span style=color:#c678dd;>return </span><span style=color:#e06c75;>lines</span><span>;
</span><span>}
</span></code></pre></div></div><p>You'll notice two extra points in the image above at the start and end. Those are not included in the code snippet above. Just ignore them for now, we'll use them later.<p><strong>Note on server-side rendering</strong><p>These methods don't work on the server. However, I checked a few server-side languages, and almost all of them have variations of these two methods. For NodeJS you could probably use <a href=https://www.npmjs.com/package/svg-path-properties>svg-path-properties</a> library.<p><span class=step-title id=points></span></div><div class="step-section step-section--normals"><h3 id=add-some-thickness>Add some thickness<a aria-label="Anchor link for: add-some-thickness" title="Anchor link for: add-some-thickness" class=header-anchor href=#add-some-thickness> <span aria-hidden=true class=sr-only>#</span></a></h3><p>Now that the path is split, we need to give each segment some thickness. We'll do it by drawing a normal line through each point.<p>For our use case, normals don't have to be mathematically exact, approximation will do. There is an easy way to approximate a normal on a curve, and it requires three consecutive points.</p><img alt="Normal line is defined by the bisector of the angle between three points" class="image image--sm" src=/img/rope/bisector.png><p>In the figure above, you can see the normal drawn through the point <strong>P</strong>. It is defined by the bisector of the angle <strong>α</strong> between points <strong>Pp</strong>, <strong>P</strong> and <strong>Pn</strong>. Points <strong>Pp</strong> and <strong>Pn</strong> are helper points. We are going to use the previous and next points as helper points.<p>If you thought, "oh, that's why he added those extra points in the previous step", you are correct! Those are added to ensure the first and the last point also have neighbors on both sides.<p>Lucky me, I already had code, as I solved the same problem for my <a href=https://muffinman.io/vertigo/>Vertigo</a> project.<p><span class=step-title id=normals></span></div><div class="step-section step-section--polygons"><h3 id=connect-normals-into-segments>Connect normals into segments<a aria-label="Anchor link for: connect-normals-into-segments" title="Anchor link for: connect-normals-into-segments" class=header-anchor href=#connect-normals-into-segments> <span aria-hidden=true class=sr-only>#</span></a></h3><p>Not much to say about this step. We just need to connect pairs of neighboring normals, which will give us blocky segments. Let's try rounding their corners to make them more interesting.<p><span class=step-title id=polygons></span></div><div class="step-section step-section--round-polygons"><h3 id=rounding-segment-corners>Rounding segment corners<a aria-label="Anchor link for: rounding-segment-corners" title="Anchor link for: rounding-segment-corners" class=header-anchor href=#rounding-segment-corners> <span aria-hidden=true class=sr-only>#</span></a></h3><p>To round segments, we will use Chaikin's method, which is a recursive subdivision algorithm for curve generation. The algorithm takes each line of the polygon and finds two points at a defined ratio (0.25 usually works best) on both sides. Then it replaces the original point with two newly created ones. Finally, we repeat the whole process recursively until we are satisfied with the result.<p>It sounds more complicated than it actually is, and I think the interactive example below will help things click into place:<div class=chaikin><svg viewbox="0 0 200 200" class=chaikin-svg></svg><div class=chaikin-control><label for=chaikin-iterations>Iterations</label><span class=chaikin-iterations-value></span><input class=chaikin-iterations id=chaikin-iterations max=6 min=0 step=1 type=range value=0></div><div class=chaikin-control><label for=chaikin-ratio>Ratio</label><span class=chaikin-ratio-value></span><input class=chaikin-ratio id=chaikin-ratio max=0.3 min=0.1 step=0.05 type=range value=0.25></div><div class=chaikin-control><label for=chaikin-show-points>Show points</label><input checked class=chaikin-show-points id=chaikin-show-points type=checkbox></div></div><p>This rounding method doesn't return bezier curves but a polyline. In many cases, that is good, as geometrical operations are easier to do with polylines than with bezier curves. With enough iterations, the human eye can't tell the difference anyway.<p><span class=step-title id=round-polygons></span></div><div class="step-section step-section--angle-polygons"><h3 id=skew-segments>Skew segments<a aria-label="Anchor link for: skew-segments" title="Anchor link for: skew-segments" class=header-anchor href=#skew-segments> <span aria-hidden=true class=sr-only>#</span></a></h3><p>The physical rope is created by twisting multiple threads together. To mimic the twisting, we need to skew our segments. We can easily do that by rotating the bisector for a fixed angle.<p><span class=step-title id=angle-polygons></span></div><div class="step-section step-section--angle-polygons-thin"><h3 id=call-it-a-day>Call it a day?<a aria-label="Anchor link for: call-it-a-day" title="Anchor link for: call-it-a-day" class=header-anchor href=#call-it-a-day> <span aria-hidden=true class=sr-only>#</span></a></h3><p>If we remove helper elements and make the whole thing thinner, it resembles a rope. Depending on your needs, you could stop right here.<p>But if we look at the photo of a rope above, we can see that our polygons are not fully resembling it. They are almost regular, while in the photo, segments overlap and go under each other.<p>So let's continue and try to make our segments look more like ones in a physical rope.<p><span class=step-title id=angle-polygons-thin></span></div><div class="step-section step-section--segments"><h3 id=improve-segments>Improve segments<a aria-label="Anchor link for: improve-segments" title="Anchor link for: improve-segments" class=header-anchor href=#improve-segments> <span aria-hidden=true class=sr-only>#</span></a></h3><p>We need to go back to the sketch I showed you at the start. We'll un-skew segments, for now, to make things easier to see.</p><img alt="Sketch on my notebook" class="image image--sm" src=/img/rope/notebook-close-up.jpg><p>We need to cut off two segment corners and add two tips defined by points 3 and 8 in the sketch.<p>After implementing it, segments felt <span class=sidenote__trigger role=button tabindex=0> too blocky and mathematical </span> <span class=sidenote__note><span class=sidenote__bracket>(</span>Sorry, but I didn't keep the code for it, so I don't have an example to show you.<span class=sidenote__bracket>)</span></span> , but I knew I was going in the right direction. Then I started fine- tuning it by moving points around. You can see the result in the image above, and I think segments now look a lot more natural and curvy.<p>Before moving on, notice that the first and the last segments are slightly different as they are not sandwiched between two other segments. That's why they have different treatment in the code than all other segments.<p><span class=step-title id=segments></span></div><div class="step-section step-section--segments-rounded"><h3 id=round-segments-again>Round segments again<a aria-label="Anchor link for: round-segments-again" title="Anchor link for: round-segments-again" class=header-anchor href=#round-segments-again> <span aria-hidden=true class=sr-only>#</span></a></h3><p>If we apply Chaikin's algorithm to new segments as a closed polyline, we will get this:<p><img alt="Rounding applied to the segment polyline as a whole" src=/img/rope/full-chaikin.png><p>It is nice and round, but it feels weird, and takes away from the illusion of twisting. It would look better if we kept two sharp corners.<p>To keep the corners, we'll split the segment line into two lines and then apply the rounding algorithm on each one separately. This will give us a better illusion of threads going behind each other.<p><span class=step-title id=segments-rounded></span></div><div class="step-section step-section--segments-rounded-fix-gaps"><h3 id=fix-gaps-optional>Fix gaps (optional)<a aria-label="Anchor link for: fix-gaps-optional" title="Anchor link for: fix-gaps-optional" class=header-anchor href=#fix-gaps-optional> <span aria-hidden=true class=sr-only>#</span></a></h3><p>There is a minor issue that is noticeable after the rounding step. Small gaps appear because points are removed in the process.<p><img alt="Small gaps that appear after using rounding polylines" src=/img/rope/gaps.png><p>I don't mind it, as it is only visible if the outlines are really thin. Thicker outlines will cover everything nicely.<p>I did fix it, but only for the challenge of it. There is a hacky technique to save a point from removing when using Chaikin's algorithm - triple that point. That way, we are creating two edges with zero width. No matter how many times we do the recursive subdivision, any ratio of zero is still zero.<p>However, this hack has a drawback. It will duplicate all three points in each iteration. So if you end up using this fix, you might want to clean up the duplicated points.<p>As I already said, I don't mind, so I disabled the fix in the following steps.<p><span class=step-title id=segments-rounded-fix-gaps></span></div><div class="step-section step-section--angle-segments"><h3 id=skew-segments-again>Skew segments again<a aria-label="Anchor link for: skew-segments-again" title="Anchor link for: skew-segments-again" class=header-anchor href=#skew-segments-again> <span aria-hidden=true class=sr-only>#</span></a></h3><p>Let's skew everything again. As in the step above, we'll just rotate the bisector by a fixed angle.<p><span class=step-title id=angle-segments></span></div><div class="step-section step-section--colors"><h3 id=add-some-color>Add some color<a aria-label="Anchor link for: add-some-color" title="Anchor link for: add-some-color" class=header-anchor href=#add-some-color> <span aria-hidden=true class=sr-only>#</span></a></h3><p>Let's remove the helper elements and add some color. I would say that now it really looks like a rope! But we are not entirely done yet.<p><span class=step-title id=colors></span></div><div class="step-section step-section--animate"><h3 id=animate-it>Animate it<a aria-label="Anchor link for: animate-it" title="Anchor link for: animate-it" class=header-anchor href=#animate-it> <span aria-hidden=true class=sr-only>#</span></a></h3><p>We can even animate our rope. Animating it can come in handy for charts. But honestly, I just wanted to have some fun with it.<p>We'll keep it simple. We'll update the path in each frame, regenerate the whole rope and rerender it. To do that, we'll need an animation loop and a way to update the path. If you are unfamiliar with the animation loop, I already <a href=/blog/javascript-animation-loop/>wrote about it here</a>.<p>To move the path, I wrote a function to update the <code>y</code> coordinate for each point on the path:<pre class=language-js data-lang=js style=background-color:#282c34;color:#dcdfe4;><code class=language-js data-lang=js><span style=color:#c678dd;>function </span><span style=color:#61afef;>getStepPath</span><span>() {
</span><span>  </span><span style=color:#c678dd;>const </span><span style=color:#e06c75;>y </span><span style=color:#c678dd;>= </span><span style=color:#61afef;>easing</span><span>(</span><span style=color:#e06c75;>t</span><span>) </span><span style=color:#c678dd;>* </span><span style=color:#e5c07b;>100 </span><span style=color:#c678dd;>+ </span><span style=color:#e5c07b;>50</span><span>;
</span><span>  </span><span style=color:#c678dd;>const </span><span style=color:#e06c75;>y1 </span><span style=color:#c678dd;>= </span><span style=color:#e06c75;>y</span><span>;
</span><span>  </span><span style=color:#c678dd;>const </span><span style=color:#e06c75;>y2 </span><span style=color:#c678dd;>= </span><span style=color:#e5c07b;>200 </span><span style=color:#c678dd;>- </span><span style=color:#e06c75;>y</span><span>;
</span><span>
</span><span>  </span><span style=color:#c678dd;>return </span><span style=color:#98c379;>`M  50 ${</span><span style=color:#e06c75;>y2</span><span style=color:#98c379;>}
</span><span style=color:#98c379;>          C 150 ${</span><span style=color:#e06c75;>y2</span><span style=color:#98c379;>}, 150 ${</span><span style=color:#e06c75;>y1</span><span style=color:#98c379;>}, 250 ${</span><span style=color:#e06c75;>y1</span><span style=color:#98c379;>}
</span><span style=color:#98c379;>          C 350 ${</span><span style=color:#e06c75;>y1</span><span style=color:#98c379;>}, 350 ${</span><span style=color:#e06c75;>y2</span><span style=color:#98c379;>}, 450 ${</span><span style=color:#e06c75;>y2</span><span style=color:#98c379;>}`</span><span>;
</span><span>}
</span></code></pre><p><code>t</code> is the value that bounces between 0 and 1 over time. Then we can apply easing to the <code>t</code> value and calculate all of the <code>y</code> values.<p>To make our rope dance, we need to plug this logic into the animation loop.<p>I won't go any deeper into the implementation here. I recommend you check the code and play with it.<p><span class=step-title id=animate></span></div><div class="step-section step-section--animate-thin"><h3 id=call-it-a-day-1>Call it a day!<a aria-label="Anchor link for: call-it-a-day-1" title="Anchor link for: call-it-a-day-1" class=header-anchor href=#call-it-a-day-1> <span aria-hidden=true class=sr-only>#</span></a></h3><p>Finally, our rope is complete! Thank you very much for sticking with me. Grab a beverage of your choice; you earned it!<p><span class=step-title id=animate-thin></span></div></div><h2 id=final-thoughts>Final thoughts<a aria-label="Anchor link for: final-thoughts" title="Anchor link for: final-thoughts" class=header-anchor href=#final-thoughts> <span aria-hidden=true class=sr-only>#</span></a></h2><p>This post took way longer to write than I expected, and I hope you enjoyed it cause I did. Making interactive examples is pretty time-consuming, but it is rewarding and fun to do.<p>Before you go, don't forget to:<ul><li>play with <a href=https://muffinman.io/blog/draw-svg-rope-using-javascript/#demo>the interactive demo</a> below<li>check the code <a href=https://codepen.io/stanko/pen/vYaEMKX>on CodePen</a><li>dig around interactive examples <a href=/js/posts/rope.js>used on this page</a> (the code is a little messy).</ul><h2 id=demo>Demo<a aria-label="Anchor link for: demo" title="Anchor link for: demo" class=header-anchor href=#demo> <span aria-hidden=true class=sr-only>#</span></a></h2><div class=demo><svg class="demo-svg image--lg is-in-viewport" viewbox="0 0 500 200"></svg><div class=demo-controls><div class=demo-controls-column><div class=demo-title>Options</div><label class=demo-checkbox-label><input checked class=demo-checkbox-animate type=checkbox> Animate</label><div class=demo-control><label for=demo-step>Segment width</label><span class=demo-value></span><input data-key=step id=demo-step max=50 min=3 step=1 type=range value=20></div><div class=demo-control><label for=demo-thickness>Rope thickness</label><span class=demo-value></span><input data-key=thickness id=demo-thickness max=50 min=3 step=1 type=range value=40></div><div class=demo-control><label for=demo-angle>Skew angle</label><span class=demo-value></span><input data-key=angle id=demo-angle max=90 min=0 step=1 type=range value=45></div></div><div class=demo-controls-column><div class=demo-title>Render</div><label class=demo-checkbox-label><input class=demo-checkbox data-key=path type=checkbox>Path</label><label class=demo-checkbox-label><input class=demo-checkbox data-key=points type=checkbox>Points</label><label class=demo-checkbox-label><input class=demo-checkbox data-key=normals type=checkbox>Normals</label><label class=demo-checkbox-label><input class=demo-checkbox data-key=polygons type=checkbox>Square-ish segments</label><label class=demo-checkbox-label><input class=demo-checkbox data-key=polygonsRounded type=checkbox>Rounded square-ish segments</label><label class=demo-checkbox-label><input class=demo-checkbox data-key=segments type=checkbox>Segments</label><label class=demo-checkbox-label><input checked class=demo-checkbox data-key=rope type=checkbox>Rounded segments</label></div><div class=demo-controls-column><div class=demo-title>Colors</div><label class=demo-radio-label><input class=demo-radio name=demo-colors type=radio value=transparent> Transparent</label><label class=demo-radio-label><input class=demo-radio name=demo-colors type=radio value=white> White</label><label class=demo-radio-label><input checked class=demo-radio name=demo-colors type=radio value=natural> Natural</label><label class=demo-radio-label><input class=demo-radio name=demo-colors type=radio value=rainbow> Rainbow</label></div></div></div><script src=/js/posts/rope.js></script></div><div class=sharing><div class=h4>Share on:</div><div class=sharing__buttons><a class="sharing__button sharing__button--hn" href="http://news.ycombinator.com/submitlink?u=https%3A//muffinman.io/blog/draw-svg-rope-using-javascript/&t=Draw%20SVG%20rope%20using%20JavaScript" title="Share post on Hacker News" rel=nofollow target=_blank> <svg viewbox="0 0 106 137" aria-hidden=true xmlns=http://www.w3.org/2000/svg><path d="M44.374 82.746.433.432h20.081l25.848 52.092c.398.928.862 1.889 1.392 2.883.53.994.994 2.022 1.391 3.082.266.398.464.762.597 1.094.133.33.265.63.398.894a65.643 65.643 0 0 1 1.79 3.877c.53 1.26.993 2.42 1.39 3.48a601.604 601.604 0 0 1 3.48-7.257c1.26-2.585 2.552-5.27 3.877-8.053L86.923.432h18.69L61.273 83.74v53.087h-16.9V82.746h.001Z"/></svg> </a><a class="sharing__button sharing__button--twitter" href="http://twitter.com/share?text=Draw%20SVG%20rope%20using%20JavaScript&url=https%3A//muffinman.io/blog/draw-svg-rope-using-javascript/" title="Share post on Twitter" rel=nofollow target=_blank> <svg viewbox="0 0 24 24" aria-hidden=true xmlns=http://www.w3.org/2000/svg><path d="M23.444 4.834c-.814.363-1.5.375-2.228.016.938-.562.981-.957 1.32-2.019-.878.521-1.851.9-2.886 1.104a4.545 4.545 0 0 0-7.742 4.145 12.897 12.897 0 0 1-9.366-4.748 4.525 4.525 0 0 0-.615 2.285c0 1.577.803 2.967 2.021 3.782a4.527 4.527 0 0 1-2.057-.568l-.001.057a4.547 4.547 0 0 0 3.646 4.456 4.575 4.575 0 0 1-2.053.079 4.551 4.551 0 0 0 4.245 3.155A9.138 9.138 0 0 1 1 18.459 12.865 12.865 0 0 0 7.966 20.5c8.358 0 12.928-6.924 12.928-12.929 0-.198-.003-.393-.012-.588.887-.64 1.953-1.237 2.562-2.149z"/></svg> </a><a class="sharing__button sharing__button--reddit" href="http://www.reddit.com/submit?url=https%3A//muffinman.io/blog/draw-svg-rope-using-javascript/&title=Draw%20SVG%20rope%20using%20JavaScript" title="Share post on reddit" rel=nofollow target=_blank> <svg viewbox="0 0 24 24" aria-hidden=true xmlns=http://www.w3.org/2000/svg><path d="M2.204 14.049c-.06.276-.091.56-.091.847 0 3.443 4.402 6.249 9.814 6.249 5.41 0 9.812-2.804 9.812-6.249 0-.274-.029-.546-.082-.809l-.015-.032a.456.456 0 0 1-.029-.165c-.302-1.175-1.117-2.241-2.296-3.103a.422.422 0 0 1-.126-.07c-.026-.02-.045-.042-.067-.064-1.792-1.234-4.356-2.008-7.196-2.008-2.815 0-5.354.759-7.146 1.971a.397.397 0 0 1-.179.124c-1.206.862-2.042 1.937-2.354 3.123a.454.454 0 0 1-.037.171l-.008.015zm9.773 5.441c-1.794 0-3.057-.389-3.863-1.197a.45.45 0 0 1 0-.632.47.47 0 0 1 .635 0c.63.629 1.685.943 3.228.943 1.542 0 2.591-.3 3.219-.929a.463.463 0 0 1 .629 0 .482.482 0 0 1 0 .645c-.809.808-2.065 1.198-3.862 1.198l.014-.028zm-3.606-7.573c-.914 0-1.677.765-1.677 1.677 0 .91.763 1.65 1.677 1.65s1.651-.74 1.651-1.65c0-.912-.739-1.677-1.651-1.677zm7.233 0c-.914 0-1.678.765-1.678 1.677 0 .91.764 1.65 1.678 1.65s1.651-.74 1.651-1.65c0-.912-.739-1.677-1.651-1.677zm4.548-1.595c1.037.833 1.8 1.821 2.189 2.904a1.818 1.818 0 0 0-2.189-2.902v-.002zM2.711 9.963a1.82 1.82 0 0 0-1.173 3.207c.401-1.079 1.172-2.053 2.213-2.876a1.82 1.82 0 0 0-1.039-.329v-.002zm9.217 12.079c-5.906 0-10.709-3.205-10.709-7.142 0-.275.023-.544.068-.809A2.723 2.723 0 0 1 0 11.777a2.725 2.725 0 0 1 2.725-2.713 2.7 2.7 0 0 1 1.797.682c1.856-1.191 4.357-1.941 7.112-1.992l1.812-5.524.404.095s.016 0 .016.002l4.223.993a2.237 2.237 0 0 1 4.296.874c0 1.232-1.003 2.234-2.231 2.234s-2.23-1.004-2.23-2.23l-3.851-.912-1.467 4.477c2.65.105 5.047.854 6.844 2.021a2.663 2.663 0 0 1 1.833-.719 2.716 2.716 0 0 1 2.718 2.711c0 .987-.54 1.886-1.378 2.365.029.255.059.494.059.749-.015 3.938-4.806 7.143-10.72 7.143l-.034.009zm8.179-19.187a1.339 1.339 0 1 0 0 2.678c.732 0 1.33-.6 1.33-1.334 0-.733-.598-1.332-1.347-1.332l.017-.012z"/></svg> </a></div></div></div><div class=post__bottom><div class=container><div class=related-posts><h2 class="h3 related-posts__title">Related Posts</h2><a class=related-posts__post href=https://muffinman.io/blog/neon-generative-art-piece-made-using-2d-vector-field/> <div class=related-posts__post-title><span>Neon,</span> a glowy vector field<svg viewbox="0 0 30 20" aria-hidden=true class=post-arrow xmlns=http://www.w3.org/2000/svg><path d="M 0 10 30 10 20 0 30 10 20 20"/></svg></div> <div class=related-posts__date>22. January 2020</div> </a><a class=related-posts__post href=https://muffinman.io/blog/three-js-extrude-svg-path/> <div class=related-posts__post-title>Three.js extrude SVG path<svg viewbox="0 0 30 20" aria-hidden=true class=post-arrow xmlns=http://www.w3.org/2000/svg><path d="M 0 10 30 10 20 0 30 10 20 20"/></svg></div> <div class=related-posts__date>18. December 2019</div> </a><a class=related-posts__post href=https://muffinman.io/blog/sektor-draw-and-animate-svg-circle-sectors-2016/> <div class=related-posts__post-title>Sektor - draw and animate SVG sectors<svg viewbox="0 0 30 20" aria-hidden=true class=post-arrow xmlns=http://www.w3.org/2000/svg><path d="M 0 10 30 10 20 0 30 10 20 20"/></svg></div> <div class=related-posts__date>29. June 2016</div> </a></div></div></div></section><footer class=footer><div class="container footer__content"><a class=footer__rss-link href=/atom.xml target=_blank> <svg viewbox="0 0 8 8" aria-hidden=true xmlns=http://www.w3.org/2000/svg><g fill=currentColor transform=matrix(1.3329835,0,0,1.3333333,-0.12812669,-2.6739007)><ellipse cx=0.88595736 cy=7.2168303 rx=0.78983712 ry=0.78859526 /><path d="m 0.09769498,5.0054256 a 3,3 0 0 1 3.00000002,3 h 1 a 4,4 0 0 0 -4.00000002,-4 z"/><path d="m 0.09769498,3.0054256 a 5,5 0 0 1 5.00000002,5 h 1 a 6,6 0 0 0 -6.00000002,-6 z"/></g></svg> RSS Feed </a><div class=footer__text><a aria-label=Home class=footer__logo-link href=/> <svg viewbox="0 0 40 20" aria-hidden=true class=logo xmlns=http://www.w3.org/2000/svg><lineargradient id=logo-gradient><stop offset=0% stop-color=var(--gradient-color-1) /><stop offset=70% stop-color=var(--gradient-color-2) /></lineargradient><path d="M19.79.5h-2.603c-2.56 0-5.04 1.377-6.003 2.754C10.22 1.877 7.742.5 5.181.5H.5v19h4.681V5.181c1.79.083 3.855 1.35 3.855 3.993V19.5h4.296V9.174c0-2.644 2.065-3.91 3.855-3.993V19.5h5.204V5.181c1.79.083 3.855 1.35 3.855 3.993V19.5h4.296V9.174c0-2.644 2.065-3.91 3.855-3.993V19.5h4.681V.5h-4.68c-2.562 0-5.04 1.377-6.004 2.754C27.43 1.877 24.952.5 22.391.5Z" fill=url(#logo-gradient) stroke-linecap=round stroke-linejoin=round stroke-width=2px vector-effect=non-scaling-stroke /></svg> </a><p>© 2016-2022. All rights reserved.<p>Written with ♡ by Stanko Tadić. Made in <s>Serbia</s> Netherlands.</div><nav class="nav nav--footer"><a class=nav__item href=/>Home</a><span aria-hidden=true>/</span><a class="nav__item nav__item--with-icon" href=/art/> Art </a><span aria-hidden=true>/</span><a class=nav__item href=/archive/> Blog </a><span aria-hidden=true>/</span><a class=nav__item href=/about/> About </a><span aria-hidden=true>/</span><a class="nav__item nav__stats" href=/stats/> Stats </a><span aria-hidden=true class=nav__stats>/</span><button class="nav__item nav__item--with-icon" data-micromodal-trigger=modal-menu>Search <svg viewbox="0 0 20 32" aria-hidden=true class=nav__search-icon height=16 width=10 xmlns=http://www.w3.org/2000/svg><g fill=none stroke=currentColor stroke-linecap=round stroke-width=3><circle cx=10 cy=10 r=10 /><path d="M 10 20 L 10 32"/></g></svg></button></nav></div></footer></div><div aria-hidden=true class=modal id=modal-menu><div aria-hidden=true class=modal__shadow></div><div aria-labelledby=modal-menu-title aria-modal=true class=modal__container role=dialog><main class=modal__content id=modal-menu-content><h2 class=sr-only id=modal-menu-title>Menu and search</h2><div class=menu><div class=container><a aria-label=Home class=menu__logo href=/> <svg viewbox="0 0 40 20" aria-hidden=true class=logo xmlns=http://www.w3.org/2000/svg><lineargradient id=logo-gradient><stop offset=0% stop-color=var(--gradient-color-1) /><stop offset=70% stop-color=var(--gradient-color-2) /></lineargradient><path d="M19.79.5h-2.603c-2.56 0-5.04 1.377-6.003 2.754C10.22 1.877 7.742.5 5.181.5H.5v19h4.681V5.181c1.79.083 3.855 1.35 3.855 3.993V19.5h4.296V9.174c0-2.644 2.065-3.91 3.855-3.993V19.5h5.204V5.181c1.79.083 3.855 1.35 3.855 3.993V19.5h4.296V9.174c0-2.644 2.065-3.91 3.855-3.993V19.5h4.681V.5h-4.68c-2.562 0-5.04 1.377-6.004 2.754C27.43 1.877 24.952.5 22.391.5Z" fill=url(#logo-gradient) stroke-linecap=round stroke-linejoin=round stroke-width=2px vector-effect=non-scaling-stroke /></svg> </a><button aria-label=Close class=menu__close data-micromodal-close><span></span> <span></span></button></div></div><div class=modal__top><div class=container><label class=sr-only for=search>Search</label><input autocomplete=off class=search__input id=search placeholder=Search></div></div><div class=modal__bottom><div class=container><div class=modal-nav><a class=h1 href=/art/> Art </a><a class=h1 href=/archive/> Blog </a><a class=h1 href=/about/> About </a><a class=h3 href=/stats/ style=modal-nav__link-margin> Stats </a><a class=h3 href=/atom.xml target=_blank> RSS Feed </a><a class=h3 href=https://github.com/stanko/ rel=noopener target=_blank> GitHub </a></div></div><div class=search__results></div></div></main></div></div><script src=/js/search-data.js></script><script src=/js/app.js></script><script async data-goatcounter=https://muffinman_io.goatcounter.com/count src=//gc.zgo.at/count.js></script>