<!doctype html><html lang=en><head><meta charset=utf-8><meta content="width=device-width,initial-scale=1.0" name=viewport><title>Jekyll and Gulp workflow · Muffin Man</title><meta content="Update, November 2017#

I don't use this setup anymore, it might be outdated, proceed with caution.
Original post#

As you probably know this blog is …" name=description><meta content="Muffin Man" property=og:site_name><meta content="Jekyll and Gulp workflow" property=og:title><meta content="Update, November 2017#

I don't use this setup anymore, it might be outdated, proceed with caution.
Original post#

As you probably know this blog is …" property=og:description><meta content=https://muffinman.io/blog/jekyll-gulp-workflow/ property=og:url><meta content="Jekyll and Gulp workflow" name=twitter:title><meta content="Update, November 2017#

I don't use this setup anymore, it might be outdated, proceed with caution.
Original post#

As you probably know this blog is …" name=twitter:description><meta content=https://muffinman.io/img/cover.png property=twitter:image><meta content=https://muffinman.io/img/cover.png property=og:image><link href=/favicon/icon.ico rel=icon sizes=any><link href=/favicon/icon.svg rel=icon type=image/svg+xml><link href=/favicon/icon-180.png rel=apple-touch-icon><link href=/favicon/manifest.webmanifest rel=manifest><link href=/style.css rel=stylesheet><link href=/atom.xml rel=alternate title=RSS type=application/rss+xml><body><div id=page><a class=jump-to-content href=#content>Jump to content</a><header class=menu><div class=container><a aria-label=Home class=menu__logo href=/> <svg viewbox="0 0 40 20" aria-hidden=true class=logo xmlns=http://www.w3.org/2000/svg> <lineargradient id=logo-gradient> <stop offset=0% stop-color=var(--gradient-color-1) /> <stop offset=70% stop-color=var(--gradient-color-2) /> </lineargradient> <path d="M19.79.5h-2.603c-2.56 0-5.04 1.377-6.003 2.754C10.22 1.877 7.742.5 5.181.5H.5v19h4.681V5.181c1.79.083 3.855 1.35 3.855 3.993V19.5h4.296V9.174c0-2.644 2.065-3.91 3.855-3.993V19.5h5.204V5.181c1.79.083 3.855 1.35 3.855 3.993V19.5h4.296V9.174c0-2.644 2.065-3.91 3.855-3.993V19.5h4.681V.5h-4.68c-2.562 0-5.04 1.377-6.004 2.754C27.43 1.877 24.952.5 22.391.5Z" fill=url(#logo-gradient) stroke-linecap=round stroke-linejoin=round stroke-width=2px vector-effect=non-scaling-stroke /> </svg> </a><nav class="nav nav--header"><a class=nav__item href=/>Home</a><span aria-hidden=true>/</span><a class=nav__item href=/archive/> Archive </a><span aria-hidden=true>/</span><a class="nav__item nav__item--with-icon" title="On my Instagram profile" href=https://instagram.com/muffinman_io/ rel=noopener target=_blank> Art <svg viewbox="0 0 20 20" aria-hidden=true class=nav__external-icon height=10 width=10 xmlns=http://www.w3.org/2000/svg> <g fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2.5> <path d="M 0 20 20 0 M 8 0 20 0 20 12"/> </g> </svg> </a><span aria-hidden=true>/</span><a class=nav__item href=/about/> About </a><span aria-hidden=true>/</span><button class="nav__item nav__item--with-icon" data-micromodal-trigger=modal-menu>Search <svg viewbox="0 0 20 32" aria-hidden=true class=nav__search-icon height=16 width=10 xmlns=http://www.w3.org/2000/svg> <g fill=none stroke=currentColor stroke-linecap=round stroke-width=3> <circle cx=10 cy=10 r=10 /> <path d="M 10 20 L 10 32"/> </g> </svg></button></nav><button aria-label=Menu class=menu__toggle data-micromodal-trigger=modal-menu><span></span> <span></span> <span></span></button></div></header><div class=menu-stripe></div><section class=main id=content role=main tabindex=-1><div class=post__top><div class="container post__top-content"><h1 class=post__title>Jekyll and Gulp workflow</h1><div class=post__date>27. February 2016</div><div class=post__info><div>Posted in <a href=/archive/#jekyll>Jekyll</a></div><span class=post__info-separator>·</span> 3 minutes read <div class=post__comments-link><a class=scroll-to href=#comments>2 Comments</a></div></div></div></div><div class=container><div class=notice>Please note that I'm not using Jekyll anymore, so this post might be outdated.</div><div class=content><h2 id=update-november-2017>Update, November 2017<a aria-label="Anchor link for: update-november-2017" title="Anchor link for: update-november-2017" class=header-anchor href=#update-november-2017><span aria-hidden=true class=sr-only>#</span></a></h2><p>I don't use this setup anymore, it might be outdated, proceed with caution.<h2 id=original-post>Original post<a aria-label="Anchor link for: original-post" title="Anchor link for: original-post" class=header-anchor href=#original-post><span aria-hidden=true class=sr-only>#</span></a></h2><p>As you probably know this blog is powered by <a href=http://jekyllrb.com/>Jekyll</a>. It is a really nice platform, but it lacks a few things I'm used to during development. First one is live reload on file changes (and injecting CSS), using SASS, autoprefixer, ES6...</p><span id=continue-reading></span><p>I tried to find a boilerplate, but everything I found didn't match my needs. Usually people would run gulp tasks for SASS and JavaScript files, and on change run <code>jekyll build</code>, which is insanely slow. They would use <a href=https://www.browsersync.io/>BrowserSync</a> to serve <code>_site</code> folder.<p>So I did what programmers do - written my own. I quickly made usual gulp tasks:<ul><li><code>styles</code> - to compile SASS and autoprefix it<li><code>scripts</code> - to transpile ES6 goodness, and concatenate JavaScript files<li><code>serve</code> - to start local server, watch for changes and auto reload</ul><p>First thing I did is that I was running <code>jekyll serve</code> in one terminal, and <code>gulp serve</code> with BrowserSync in the other. This was working decently, but I wanted to run only one command, and let the tasks do everything for me.<p>That is where node child process comes in.<pre class=language-tsx data-lang=tsx style=background-color:#fafafa;color:#383a42;><code class=language-tsx data-lang=tsx><span style=color:#a626a4;>import </span><span style=color:#e45649;>childProcess </span><span style=color:#a626a4;>from </span><span style=color:#50a14f;>'child_process'</span><span>;
</span><span>
</span><span style=color:#a626a4;>const </span><span style=color:#e45649;>spawn </span><span style=color:#a626a4;>= </span><span style=color:#e45649;>childProcess</span><span>.</span><span style=color:#e45649;>spawn</span><span>;
</span><span>
</span><span style=color:#e45649;>gulp</span><span>.</span><span style=color:#0184bc;>task</span><span>(</span><span style=color:#50a14f;>'jekyll'</span><span>, </span><span style=color:#a626a4;>function </span><span>(){
</span><span>  </span><span style=color:#a626a4;>const </span><span style=color:#e45649;>jekyll </span><span style=color:#a626a4;>= </span><span style=color:#0184bc;>spawn</span><span>(</span><span style=color:#50a14f;>'jekyll'</span><span>, [</span><span style=color:#50a14f;>'serve'</span><span>], {
</span><span>    stdio: </span><span style=color:#50a14f;>'inherit'
</span><span>  });
</span><span>});
</span></code></pre><p>This task spawns a child process from gulp. Nice thing is that we can start it, and gulp will kill it on exit. Now we have up and running Jekyll server, and proxy it to BrowserSync.<p>But darn, injecting CSS files didn't really work. Server was expeting CSS file to come from <code>/css/style.css</code>, but <code>browserSync.stream</code> in gulp pipe would inject it from the <code>_sass</code> folder. I solved this by copying css file to the <code>.tmp/css</code> and adding <code>.tmp</code> to the <code>serveStatic</code> option of the BrowserSync.<p>One thing I should mention, that I keep my SASS files in the <code>_sass</code> folder, and JavaScript in the <code>_js</code> one.<ol><li>Gulp watches changes on SASS/JS, and compiles them into <code>public</code> folder.<li>Then <code>jekyll serve</code> takes them and moves them to <code>_site</code>. Jekyll also takes care of <code>.md</code> files.<li>Gulp watches changes on <code>_site</code> and reloads the browser if html/js is changed.</ol><p>Complete code is available <a href=https://github.com/Stanko/Stanko.github.io>here</a>.<hr><h3 id=tl-dr>TL;DR<a aria-label="Anchor link for: tl-dr" title="Anchor link for: tl-dr" class=header-anchor href=#tl-dr><span aria-hidden=true class=sr-only>#</span></a></h3><p>To enable live reload, SASS and JS transpiling in your Jekyll development grab my <a href=https://github.com/Stanko/Stanko.github.io/blob/master/gulpfile.babel.js>gulpfile.babel.js</a>, <a href=https://github.com/Stanko/Stanko.github.io/blob/master/package.json>package.json</a><p>Add this to your <code>_config.yml</code><pre class=language-js data-lang=js style=background-color:#fafafa;color:#383a42;><code class=language-js data-lang=js><span>exclude: [
</span><span>  </span><span style=color:#50a14f;>'node_modules'</span><span>,
</span><span>  </span><span style=color:#50a14f;>'gulpfile.babel.js'</span><span>,
</span><span>  </span><span style=color:#50a14f;>'package.json'</span><span>,
</span><span>  </span><span style=color:#50a14f;>'_sass'</span><span>,
</span><span>  </span><span style=color:#50a14f;>'_js'</span><span>,
</span><span>  </span><span style=color:#50a14f;>'.sass-cache'
</span><span>]
</span></code></pre><p>Run <code>npm install</code> then <code>gulp</code> when it is finished and open <code>http://localhost:9000</code> in your browser. Then write your posts and enjoy much smoother workflow.</div><div class=sharing><div class=h4>Share on:</div><div class=sharing__buttons><a class="sharing__button sharing__button--hn" href="http://news.ycombinator.com/submitlink?u=https%3A//muffinman.io/blog/jekyll-gulp-workflow/&t=Jekyll%20and%20Gulp%20workflow" title="Share post on Hacker News" rel=nofollow target=_blank> <svg viewbox="0 0 106 137" aria-hidden=true xmlns=http://www.w3.org/2000/svg> <path d="M44.374 82.746.433.432h20.081l25.848 52.092c.398.928.862 1.889 1.392 2.883.53.994.994 2.022 1.391 3.082.266.398.464.762.597 1.094.133.33.265.63.398.894a65.643 65.643 0 0 1 1.79 3.877c.53 1.26.993 2.42 1.39 3.48a601.604 601.604 0 0 1 3.48-7.257c1.26-2.585 2.552-5.27 3.877-8.053L86.923.432h18.69L61.273 83.74v53.087h-16.9V82.746h.001Z"/> </svg> </a><a class="sharing__button sharing__button--twitter" href="http://twitter.com/share?text=Jekyll%20and%20Gulp%20workflow&url=https%3A//muffinman.io/blog/jekyll-gulp-workflow/" title="Share post on Twitter" rel=nofollow target=_blank> <svg viewbox="0 0 24 24" aria-hidden=true xmlns=http://www.w3.org/2000/svg> <path d="M23.444 4.834c-.814.363-1.5.375-2.228.016.938-.562.981-.957 1.32-2.019-.878.521-1.851.9-2.886 1.104a4.545 4.545 0 0 0-7.742 4.145 12.897 12.897 0 0 1-9.366-4.748 4.525 4.525 0 0 0-.615 2.285c0 1.577.803 2.967 2.021 3.782a4.527 4.527 0 0 1-2.057-.568l-.001.057a4.547 4.547 0 0 0 3.646 4.456 4.575 4.575 0 0 1-2.053.079 4.551 4.551 0 0 0 4.245 3.155A9.138 9.138 0 0 1 1 18.459 12.865 12.865 0 0 0 7.966 20.5c8.358 0 12.928-6.924 12.928-12.929 0-.198-.003-.393-.012-.588.887-.64 1.953-1.237 2.562-2.149z"/> </svg> </a><a class="sharing__button sharing__button--reddit" href="http://www.reddit.com/submit?url=https%3A//muffinman.io/blog/jekyll-gulp-workflow/&title=Jekyll%20and%20Gulp%20workflow" title="Share post on reddit" rel=nofollow target=_blank> <svg viewbox="0 0 24 24" aria-hidden=true xmlns=http://www.w3.org/2000/svg> <path d="M2.204 14.049c-.06.276-.091.56-.091.847 0 3.443 4.402 6.249 9.814 6.249 5.41 0 9.812-2.804 9.812-6.249 0-.274-.029-.546-.082-.809l-.015-.032a.456.456 0 0 1-.029-.165c-.302-1.175-1.117-2.241-2.296-3.103a.422.422 0 0 1-.126-.07c-.026-.02-.045-.042-.067-.064-1.792-1.234-4.356-2.008-7.196-2.008-2.815 0-5.354.759-7.146 1.971a.397.397 0 0 1-.179.124c-1.206.862-2.042 1.937-2.354 3.123a.454.454 0 0 1-.037.171l-.008.015zm9.773 5.441c-1.794 0-3.057-.389-3.863-1.197a.45.45 0 0 1 0-.632.47.47 0 0 1 .635 0c.63.629 1.685.943 3.228.943 1.542 0 2.591-.3 3.219-.929a.463.463 0 0 1 .629 0 .482.482 0 0 1 0 .645c-.809.808-2.065 1.198-3.862 1.198l.014-.028zm-3.606-7.573c-.914 0-1.677.765-1.677 1.677 0 .91.763 1.65 1.677 1.65s1.651-.74 1.651-1.65c0-.912-.739-1.677-1.651-1.677zm7.233 0c-.914 0-1.678.765-1.678 1.677 0 .91.764 1.65 1.678 1.65s1.651-.74 1.651-1.65c0-.912-.739-1.677-1.651-1.677zm4.548-1.595c1.037.833 1.8 1.821 2.189 2.904a1.818 1.818 0 0 0-2.189-2.902v-.002zM2.711 9.963a1.82 1.82 0 0 0-1.173 3.207c.401-1.079 1.172-2.053 2.213-2.876a1.82 1.82 0 0 0-1.039-.329v-.002zm9.217 12.079c-5.906 0-10.709-3.205-10.709-7.142 0-.275.023-.544.068-.809A2.723 2.723 0 0 1 0 11.777a2.725 2.725 0 0 1 2.725-2.713 2.7 2.7 0 0 1 1.797.682c1.856-1.191 4.357-1.941 7.112-1.992l1.812-5.524.404.095s.016 0 .016.002l4.223.993a2.237 2.237 0 0 1 4.296.874c0 1.232-1.003 2.234-2.231 2.234s-2.23-1.004-2.23-2.23l-3.851-.912-1.467 4.477c2.65.105 5.047.854 6.844 2.021a2.663 2.663 0 0 1 1.833-.719 2.716 2.716 0 0 1 2.718 2.711c0 .987-.54 1.886-1.378 2.365.029.255.059.494.059.749-.015 3.938-4.806 7.143-10.72 7.143l-.034.009zm8.179-19.187a1.339 1.339 0 1 0 0 2.678c.732 0 1.33-.6 1.33-1.334 0-.733-.598-1.332-1.347-1.332l.017-.012z"/> </svg> </a></div></div></div><div class=post__bottom><div class=container><div class=related-posts><h2 class="h3 related-posts__title">Related Posts</h2><a class=related-posts__post href=https://muffinman.io/blog/my-blog-setup/> <div class=related-posts__post-title>My blog setup<svg viewbox="0 0 30 20" aria-hidden=true class=post-arrow xmlns=http://www.w3.org/2000/svg> <path d="M 0 10 30 10 20 0 30 10 20 20"/> </svg></div> <div class=related-posts__date>27. September 2017</div> </a><a class=related-posts__post href=https://muffinman.io/blog/travis-jekyll-and-github-pages/> <div class=related-posts__post-title>Setting up Travis, Jekyll and GitHub pages<svg viewbox="0 0 30 20" aria-hidden=true class=post-arrow xmlns=http://www.w3.org/2000/svg> <path d="M 0 10 30 10 20 0 30 10 20 20"/> </svg></div> <div class=related-posts__date>24. October 2016</div> </a><a class=related-posts__post href=https://muffinman.io/blog/new-design-and-features/> <div class=related-posts__post-title>Blog redesign and new features<svg viewbox="0 0 30 20" aria-hidden=true class=post-arrow xmlns=http://www.w3.org/2000/svg> <path d="M 0 10 30 10 20 0 30 10 20 20"/> </svg></div> <div class=related-posts__date>20. October 2016</div> </a></div><div class=comments><h2 class="h3 comments__title" id=comments>Comments (2)</h2><div><div class=comment id=comment-cae29cd0-1586-11e8-968d-8b90fd88d642><div class=comment__top><img src="https://www.gravatar.com/avatar/a7d20c54354fa73ee267dfb28a2bfc23?d=mm&r=g" class=comment__avatar><div class=comment__right><div class="comment__name h5">JerTurowetz</div><div class=comment__date>19. Feb 2018, 15:08</div></div></div><div class=comment__message><p>You've noted you're not using this kind of workflow anymore. I'm curious to know how you're approaching simple builds instead.</div></div><div class=comment id=comment-6cb2b2f0-158e-11e8-968d-8b90fd88d642><div class=comment__top><div class="comment__avatar comment__avatar--mm"><svg viewbox="0 0 40 20" aria-hidden=true class=logo xmlns=http://www.w3.org/2000/svg> <lineargradient id=logo-gradient> <stop offset=0% stop-color=var(--gradient-color-1) /> <stop offset=70% stop-color=var(--gradient-color-2) /> </lineargradient> <path d="M19.79.5h-2.603c-2.56 0-5.04 1.377-6.003 2.754C10.22 1.877 7.742.5 5.181.5H.5v19h4.681V5.181c1.79.083 3.855 1.35 3.855 3.993V19.5h4.296V9.174c0-2.644 2.065-3.91 3.855-3.993V19.5h5.204V5.181c1.79.083 3.855 1.35 3.855 3.993V19.5h4.296V9.174c0-2.644 2.065-3.91 3.855-3.993V19.5h4.681V.5h-4.68c-2.562 0-5.04 1.377-6.004 2.754C27.43 1.877 24.952.5 22.391.5Z" fill=url(#logo-gradient) stroke-linecap=round stroke-linejoin=round stroke-width=2px vector-effect=non-scaling-stroke /> </svg></div><div class=comment__right><div class="comment__name h5">Stanko</div><div class=comment__date>19. Feb 2018, 16:03</div></div></div><div class=comment__message><p>Hey there, I can do a short blog post about it. I replaced all plugins not supported by GitHub pages with plain Liquid ones. And wrote a simple webpack script to compile ES6 and SASS. Code is available on GitHub.</div></div></div></div></div></div></section><footer class=footer><div class="container footer__content"><a class=footer__rss-link href=/atom.xml target=_blank> <svg viewbox="0 0 8 8" aria-hidden=true xmlns=http://www.w3.org/2000/svg> <g fill=currentColor transform=matrix(1.3329835,0,0,1.3333333,-0.12812669,-2.6739007)> <ellipse cx=0.88595736 cy=7.2168303 rx=0.78983712 ry=0.78859526 /> <path d="m 0.09769498,5.0054256 a 3,3 0 0 1 3.00000002,3 h 1 a 4,4 0 0 0 -4.00000002,-4 z"/> <path d="m 0.09769498,3.0054256 a 5,5 0 0 1 5.00000002,5 h 1 a 6,6 0 0 0 -6.00000002,-6 z"/> </g> </svg> RSS Feed </a><div class=footer__text><a aria-label=Home class=footer__logo-link href=/> <svg viewbox="0 0 40 20" aria-hidden=true class=logo xmlns=http://www.w3.org/2000/svg> <lineargradient id=logo-gradient> <stop offset=0% stop-color=var(--gradient-color-1) /> <stop offset=70% stop-color=var(--gradient-color-2) /> </lineargradient> <path d="M19.79.5h-2.603c-2.56 0-5.04 1.377-6.003 2.754C10.22 1.877 7.742.5 5.181.5H.5v19h4.681V5.181c1.79.083 3.855 1.35 3.855 3.993V19.5h4.296V9.174c0-2.644 2.065-3.91 3.855-3.993V19.5h5.204V5.181c1.79.083 3.855 1.35 3.855 3.993V19.5h4.296V9.174c0-2.644 2.065-3.91 3.855-3.993V19.5h4.681V.5h-4.68c-2.562 0-5.04 1.377-6.004 2.754C27.43 1.877 24.952.5 22.391.5Z" fill=url(#logo-gradient) stroke-linecap=round stroke-linejoin=round stroke-width=2px vector-effect=non-scaling-stroke /> </svg> </a><p>© 2016-2022. All rights reserved.<p>Written with ♡ by Stanko Tadić. Made in Serbia.</div><nav class="nav nav--footer"><a class=nav__item href=/>Home</a><span aria-hidden=true>/</span><a class=nav__item href=/archive/> Archive </a><span aria-hidden=true>/</span><a class="nav__item nav__item--with-icon" title="On my Instagram profile" href=https://instagram.com/muffinman_io/ rel=noopener target=_blank> Art <svg viewbox="0 0 20 20" aria-hidden=true class=nav__external-icon height=10 width=10 xmlns=http://www.w3.org/2000/svg> <g fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2.5> <path d="M 0 20 20 0 M 8 0 20 0 20 12"/> </g> </svg> </a><span aria-hidden=true>/</span><a class=nav__item href=/about/> About </a><span aria-hidden=true>/</span><button class="nav__item nav__item--with-icon" data-micromodal-trigger=modal-menu>Search <svg viewbox="0 0 20 32" aria-hidden=true class=nav__search-icon height=16 width=10 xmlns=http://www.w3.org/2000/svg> <g fill=none stroke=currentColor stroke-linecap=round stroke-width=3> <circle cx=10 cy=10 r=10 /> <path d="M 10 20 L 10 32"/> </g> </svg></button></nav></div></footer></div><div aria-hidden=true class=modal id=modal-menu><div class=modal__overlay><div><div aria-hidden=true class=modal__shadow></div><div aria-labelledby=modal-menu-title aria-modal=true class=modal__container role=dialog><main class=modal__content id=modal-menu-content><h2 class=sr-only id=modal-menu-title>Menu and search</h2><div class=menu><div class=container><a aria-label=Home class=menu__logo href=/> <svg viewbox="0 0 40 20" aria-hidden=true class=logo xmlns=http://www.w3.org/2000/svg> <lineargradient id=logo-gradient> <stop offset=0% stop-color=var(--gradient-color-1) /> <stop offset=70% stop-color=var(--gradient-color-2) /> </lineargradient> <path d="M19.79.5h-2.603c-2.56 0-5.04 1.377-6.003 2.754C10.22 1.877 7.742.5 5.181.5H.5v19h4.681V5.181c1.79.083 3.855 1.35 3.855 3.993V19.5h4.296V9.174c0-2.644 2.065-3.91 3.855-3.993V19.5h5.204V5.181c1.79.083 3.855 1.35 3.855 3.993V19.5h4.296V9.174c0-2.644 2.065-3.91 3.855-3.993V19.5h4.681V.5h-4.68c-2.562 0-5.04 1.377-6.004 2.754C27.43 1.877 24.952.5 22.391.5Z" fill=url(#logo-gradient) stroke-linecap=round stroke-linejoin=round stroke-width=2px vector-effect=non-scaling-stroke /> </svg> </a><button aria-label=Close class=menu__close data-micromodal-close><span></span> <span></span></button></div></div><div class=modal__top><div class=container><label class=sr-only for=search>Search</label><input class=search__input id=search placeholder=Search></div></div><div class=modal__bottom><div class=container><div class=modal-nav><a class=h1 href=/archive/> Archive </a><a title="On my Instagram profile" class=h1 href=https://instagram.com/muffinman_io/ rel=noopener target=_blank> Art </a><a class=h1 href=/about/> About </a><a class=h1 href=/atom.xml> RSS Feed </a><a class=h1 href=https://github.com/stanko/ rel=noopener target=_blank> GitHub </a></div></div><div class=search__results></div><main><div></div><div></div><script src=/js/search-data.js></script><script src=/js/app.js></script><script>if (window.location.hostname !== 'localhost' && window.location.hostname.search('.local') > -1 && window.location.hostname !== '0.0.0.0') {
      (function() {
        window.counter = 'https://muffinman_io.goatcounter.com/count';

        var script = document.createElement('script');
        script.async = 1;
        script.src = '//gc.zgo.at/count.js';
        var ins = document.getElementsByTagName('script')[0];
        ins.parentNode.insertBefore(script, ins);
      })();
    }</script>