<!doctype html><html lang=en><head><meta charset=utf-8><meta content="width=device-width,initial-scale=1.0" name=viewport><title>Simple JavaScript API wrapper · Muffin Man</title><meta content="For handling API calls I have a small snippet I'm copying from project to project.
I decided to clean it up, make more generic and share it.
It is int…" name=description><meta content="Muffin Man" property=og:site_name><meta content="Simple JavaScript API wrapper" property=og:title><meta content="For handling API calls I have a small snippet I'm copying from project to project.
I decided to clean it up, make more generic and share it.
It is int…" property=og:description><meta content=https://muffinman.io/blog/simple-javascript-api-wrapper/ property=og:url><meta content="Simple JavaScript API wrapper" name=twitter:title><meta content="For handling API calls I have a small snippet I'm copying from project to project.
I decided to clean it up, make more generic and share it.
It is int…" name=twitter:description><meta content=https://muffinman.io/img/cover.png property=twitter:image><meta content=https://muffinman.io/img/cover.png property=og:image><link href=/favicon/icon.ico rel=icon sizes=any><link href=/favicon/icon.svg rel=icon type=image/svg+xml><link href=/favicon/icon-180.png rel=apple-touch-icon><link href=/favicon/manifest.webmanifest rel=manifest><link href=/style.css rel=stylesheet><link href=/atom.xml rel=alternate title=RSS type=application/rss+xml><body><div id=page><a class=jump-to-content href=#content>Jump to content</a><header class=menu><div class=container><a aria-label=Home class=menu__logo href=/> <svg viewbox="0 0 40 20" aria-hidden=true class=logo xmlns=http://www.w3.org/2000/svg> <lineargradient id=logo-gradient> <stop offset=0% stop-color=var(--gradient-color-1) /> <stop offset=70% stop-color=var(--gradient-color-2) /> </lineargradient> <path d="M19.79.5h-2.603c-2.56 0-5.04 1.377-6.003 2.754C10.22 1.877 7.742.5 5.181.5H.5v19h4.681V5.181c1.79.083 3.855 1.35 3.855 3.993V19.5h4.296V9.174c0-2.644 2.065-3.91 3.855-3.993V19.5h5.204V5.181c1.79.083 3.855 1.35 3.855 3.993V19.5h4.296V9.174c0-2.644 2.065-3.91 3.855-3.993V19.5h4.681V.5h-4.68c-2.562 0-5.04 1.377-6.004 2.754C27.43 1.877 24.952.5 22.391.5Z" fill=url(#logo-gradient) stroke-linecap=round stroke-linejoin=round stroke-width=2px vector-effect=non-scaling-stroke /> </svg> </a><nav class="nav nav--header"><a class=nav__item href=/>Home</a><span aria-hidden=true>/</span><a class=nav__item href=/archive/> Archive </a><span aria-hidden=true>/</span><a class="nav__item nav__item--with-icon" title="On my Instagram profile" href=https://instagram.com/muffinman_io/ rel=noopener target=_blank> Art <svg viewbox="0 0 20 20" aria-hidden=true class=nav__external-icon height=10 width=10 xmlns=http://www.w3.org/2000/svg> <g fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2.5> <path d="M 0 20 20 0 M 8 0 20 0 20 12"/> </g> </svg> </a><span aria-hidden=true>/</span><a class=nav__item href=/about/> About </a><span aria-hidden=true>/</span><button class="nav__item nav__item--with-icon" data-micromodal-trigger=modal-menu>Search <svg viewbox="0 0 20 32" aria-hidden=true class=nav__search-icon height=16 width=10 xmlns=http://www.w3.org/2000/svg> <g fill=none stroke=currentColor stroke-linecap=round stroke-width=3> <circle cx=10 cy=10 r=10 /> <path d="M 10 20 L 10 32"/> </g> </svg></button></nav><button aria-label=Menu class=menu__toggle data-micromodal-trigger=modal-menu><span></span> <span></span> <span></span></button></div></header><div class=menu-stripe></div><section class=main id=content role=main tabindex=-1><div class=post__top><div class="container post__top-content"><h1 class=post__title>Simple JavaScript API wrapper</h1><div class=post__date>06. December 2017</div><div class=post__info><div>Posted in <a href=/archive/#javascript>JavaScript</a></div><span class=post__info-separator>·</span> 4 minutes read <div class=post__comments-link><a class=scroll-to href=#comments>4 Comments</a></div></div></div></div><div class=container><div class=content><p>For handling API calls I have a small snippet I'm copying from project to project. I decided to clean it up, make more generic and share it. It is intended to be a starting point, so you might want to customize it to your custom needs.<h2 id=what-it-does>What it does?<a aria-label="Anchor link for: what-it-does" title="Anchor link for: what-it-does" class=header-anchor href=#what-it-does><img aria-hidden=true src=/img/link.svg></a></h2><p>It is a simple wrapper around <span class=sidenote__trigger role=button tabindex=0> native <code>fetch</code>. </span> <span class=sidenote__note><span class=sidenote__bracket>(</span>If you need a polyfill <a href=https://www.npmjs.com/package/isomorphic-fetch>isomorphic-fetch</a> is a great one.<span class=sidenote__bracket>)</span></span><ul><li>For successful requests it will parse the response and return it.<li>When <span class=sidenote__trigger role=button tabindex=0> HTTP error occurs </span> <span class=sidenote__note><span class=sidenote__bracket>(</span>It detects errors based on request's HTTP status.<span class=sidenote__bracket>)</span></span> it will throw a custom error with status code, error message and response (parsed if it is a JSON).<li>If request never gets resolved, same custom error will be thrown but response will be set to <code>null</code> and status code to <code>REQUEST_FAILED</code>.</ul><p>Please note that function will return a <a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise>Promise</a> so you need to handle how it resolves.</p><span id=continue-reading></span><h2 id=code>Code<a aria-label="Anchor link for: code" title="Anchor link for: code" class=header-anchor href=#code><img aria-hidden=true src=/img/link.svg></a></h2><p>It is written as a native ES2015 module, which means you may need to transpile it depending on your browser support policy.<pre class=language-js data-lang=js style=background-color:#fafafa;color:#383a42;><code class=language-js data-lang=js><span style=color:#a0a1a7;>// ------------------------------------------------------ //
</span><span style=color:#a0a1a7;>// Simple JavaScript API wrapper
</span><span style=color:#a0a1a7;>// https://muffinman.io/simple-javascript-api-wrapper
</span><span style=color:#a0a1a7;>// ------------------------------------------------------ //
</span><span>
</span><span style=color:#a0a1a7;>// For demo purposes I'm using this awesome Star Wars API
</span><span style=color:#a626a4;>const </span><span style=color:#e45649;>API_URL </span><span style=color:#a626a4;>= </span><span style=color:#50a14f;>'https://swapi.co/api'</span><span>;
</span><span>
</span><span style=color:#a0a1a7;>// Custom API error to throw
</span><span style=color:#a626a4;>function </span><span style=color:#0184bc;>ApiError</span><span>(</span><span style=color:#e45649;>message</span><span>, </span><span style=color:#e45649;>data</span><span>, </span><span style=color:#e45649;>status</span><span>) {
</span><span>  </span><span style=color:#a626a4;>let </span><span style=color:#e45649;>response </span><span style=color:#a626a4;>= </span><span style=color:#c18401;>null</span><span>;
</span><span>  </span><span style=color:#a626a4;>let </span><span style=color:#e45649;>isObject </span><span style=color:#a626a4;>= </span><span style=color:#c18401;>false</span><span>;
</span><span>
</span><span>  </span><span style=color:#a0a1a7;>// We are trying to parse response
</span><span>  </span><span style=color:#a626a4;>try </span><span>{
</span><span>    </span><span style=color:#e45649;>response </span><span style=color:#a626a4;>= </span><span>JSON.</span><span style=color:#0184bc;>parse</span><span>(</span><span style=color:#e45649;>data</span><span>);
</span><span>    </span><span style=color:#e45649;>isObject </span><span style=color:#a626a4;>= </span><span style=color:#c18401;>true</span><span>;
</span><span>  } </span><span style=color:#a626a4;>catch </span><span>(</span><span style=color:#e45649;>e</span><span>) {
</span><span>    </span><span style=color:#e45649;>response </span><span style=color:#a626a4;>= </span><span style=color:#e45649;>data</span><span>;
</span><span>  }
</span><span>
</span><span>  </span><span style=color:#e45649;>this</span><span>.</span><span style=color:#e45649;>response </span><span style=color:#a626a4;>= </span><span style=color:#e45649;>response</span><span>;
</span><span>  </span><span style=color:#e45649;>this</span><span>.</span><span style=color:#e45649;>message </span><span style=color:#a626a4;>= </span><span style=color:#e45649;>message</span><span>;
</span><span>  </span><span style=color:#e45649;>this</span><span>.status </span><span style=color:#a626a4;>= </span><span style=color:#e45649;>status</span><span>;
</span><span>  </span><span style=color:#e45649;>this</span><span>.</span><span style=color:#0184bc;>toString </span><span style=color:#a626a4;>= function </span><span>() {
</span><span>    </span><span style=color:#a626a4;>return </span><span style=color:#50a14f;>`${ </span><span style=color:#e45649;>this</span><span style=color:#50a14f;>.</span><span style=color:#e45649;>message </span><span style=color:#50a14f;>}</span><span style=color:#0997b3;>\n</span><span style=color:#50a14f;>Response:</span><span style=color:#0997b3;>\n</span><span style=color:#50a14f;>${ </span><span style=color:#e45649;>isObject </span><span style=color:#a626a4;>? </span><span style=color:#50a14f;>JSON.</span><span style=color:#0184bc;>stringify</span><span style=color:#50a14f;>(</span><span style=color:#e45649;>this</span><span style=color:#50a14f;>.</span><span style=color:#e45649;>response</span><span style=color:#50a14f;>, </span><span style=color:#c18401;>null</span><span style=color:#50a14f;>, </span><span style=color:#c18401;>2</span><span style=color:#50a14f;>) </span><span style=color:#a626a4;>: </span><span style=color:#e45649;>this</span><span style=color:#50a14f;>.</span><span style=color:#e45649;>response </span><span style=color:#50a14f;>}`</span><span>;
</span><span>  };
</span><span>}
</span><span>
</span><span style=color:#a0a1a7;>// API wrapper function
</span><span style=color:#a626a4;>const </span><span style=color:#0184bc;>fetchResource </span><span style=color:#a626a4;>= </span><span>(</span><span style=color:#e45649;>path</span><span>, </span><span style=color:#e45649;>userOptions </span><span style=color:#a626a4;>= </span><span>{}) </span><span style=color:#a626a4;>=> </span><span>{
</span><span>  </span><span style=color:#a0a1a7;>// Define default options
</span><span>  </span><span style=color:#a626a4;>const </span><span style=color:#e45649;>defaultOptions </span><span style=color:#a626a4;>= </span><span>{};
</span><span>  </span><span style=color:#a0a1a7;>// Define default headers
</span><span>  </span><span style=color:#a626a4;>const </span><span style=color:#e45649;>defaultHeaders </span><span style=color:#a626a4;>= </span><span>{};
</span><span>
</span><span>  </span><span style=color:#a626a4;>const </span><span style=color:#e45649;>options </span><span style=color:#a626a4;>= </span><span>{
</span><span>    </span><span style=color:#a0a1a7;>// Merge options
</span><span>    </span><span style=color:#a626a4;>...</span><span style=color:#e45649;>defaultOptions</span><span>,
</span><span>    </span><span style=color:#a626a4;>...</span><span style=color:#e45649;>userOptions</span><span>,
</span><span>    </span><span style=color:#a0a1a7;>// Merge headers
</span><span>    headers: {
</span><span>      </span><span style=color:#a626a4;>...</span><span style=color:#e45649;>defaultHeaders</span><span>,
</span><span>      </span><span style=color:#a626a4;>...</span><span style=color:#e45649;>userOptions</span><span>.headers,
</span><span>    },
</span><span>  };
</span><span>
</span><span>  </span><span style=color:#a0a1a7;>// Build Url
</span><span>  </span><span style=color:#a626a4;>const </span><span style=color:#e45649;>url </span><span style=color:#a626a4;>= </span><span style=color:#50a14f;>`${ </span><span style=color:#e45649;>API_URL </span><span style=color:#50a14f;>}/${ </span><span style=color:#e45649;>path </span><span style=color:#50a14f;>}`</span><span>;
</span><span>
</span><span>  </span><span style=color:#a0a1a7;>// Detect is we are uploading a file
</span><span>  </span><span style=color:#a626a4;>const </span><span style=color:#e45649;>isFile </span><span style=color:#a626a4;>= </span><span style=color:#e45649;>options</span><span>.body </span><span style=color:#a626a4;>instanceof </span><span>File;
</span><span>
</span><span>  </span><span style=color:#a0a1a7;>// Stringify JSON data
</span><span>  </span><span style=color:#a0a1a7;>// If body is not a file
</span><span>  </span><span style=color:#a626a4;>if </span><span>(</span><span style=color:#e45649;>options</span><span>.body </span><span style=color:#a626a4;>&& typeof </span><span style=color:#e45649;>options</span><span>.body </span><span style=color:#a626a4;>=== </span><span style=color:#50a14f;>'object' </span><span style=color:#a626a4;>&& !</span><span style=color:#e45649;>isFile</span><span>) {
</span><span>    </span><span style=color:#e45649;>options</span><span>.body </span><span style=color:#a626a4;>= </span><span>JSON.</span><span style=color:#0184bc;>stringify</span><span>(</span><span style=color:#e45649;>options</span><span>.body);
</span><span>  }
</span><span>
</span><span>  </span><span style=color:#a0a1a7;>// Variable which will be used for storing response
</span><span>  </span><span style=color:#a626a4;>let </span><span style=color:#e45649;>response </span><span style=color:#a626a4;>= </span><span style=color:#c18401;>null</span><span>;
</span><span>
</span><span>  </span><span style=color:#a626a4;>return </span><span style=color:#0184bc;>fetch</span><span>(</span><span style=color:#e45649;>url</span><span>, </span><span style=color:#e45649;>options</span><span>)
</span><span>    .</span><span style=color:#0184bc;>then</span><span>(</span><span style=color:#e45649;>responseObject </span><span style=color:#a626a4;>=> </span><span>{
</span><span>      </span><span style=color:#a0a1a7;>// Saving response for later use in lower scopes
</span><span>      </span><span style=color:#e45649;>response </span><span style=color:#a626a4;>= </span><span style=color:#e45649;>responseObject</span><span>;
</span><span>
</span><span>      </span><span style=color:#a0a1a7;>// HTTP unauthorized
</span><span>      </span><span style=color:#a626a4;>if </span><span>(</span><span style=color:#e45649;>response</span><span>.status </span><span style=color:#a626a4;>=== </span><span style=color:#c18401;>401</span><span>) {
</span><span>        </span><span style=color:#a0a1a7;>// Handle unauthorized requests
</span><span>        </span><span style=color:#a0a1a7;>// Maybe redirect to login page?
</span><span>      }
</span><span>
</span><span>      </span><span style=color:#a0a1a7;>// Check for error HTTP error codes
</span><span>      </span><span style=color:#a626a4;>if </span><span>(</span><span style=color:#e45649;>response</span><span>.status </span><span style=color:#a626a4;>< </span><span style=color:#c18401;>200 </span><span style=color:#a626a4;>|| </span><span style=color:#e45649;>response</span><span>.status </span><span style=color:#a626a4;>>= </span><span style=color:#c18401;>300</span><span>) {
</span><span>        </span><span style=color:#a0a1a7;>// Get response as text
</span><span>        </span><span style=color:#a626a4;>return </span><span style=color:#e45649;>response</span><span>.</span><span style=color:#0184bc;>text</span><span>();
</span><span>      }
</span><span>
</span><span>      </span><span style=color:#a0a1a7;>// Get response as json
</span><span>      </span><span style=color:#a626a4;>return </span><span style=color:#e45649;>response</span><span>.</span><span style=color:#0184bc;>json</span><span>();
</span><span>    })
</span><span>    </span><span style=color:#a0a1a7;>// "parsedResponse" will be either text or javascript object depending if
</span><span>    </span><span style=color:#a0a1a7;>// "response.text()" or "response.json()" got called in the upper scope
</span><span>    .</span><span style=color:#0184bc;>then</span><span>(</span><span style=color:#e45649;>parsedResponse </span><span style=color:#a626a4;>=> </span><span>{
</span><span>      </span><span style=color:#a0a1a7;>// Check for HTTP error codes
</span><span>      </span><span style=color:#a626a4;>if </span><span>(</span><span style=color:#e45649;>response</span><span>.status </span><span style=color:#a626a4;>< </span><span style=color:#c18401;>200 </span><span style=color:#a626a4;>|| </span><span style=color:#e45649;>response</span><span>.status </span><span style=color:#a626a4;>>= </span><span style=color:#c18401;>300</span><span>) {
</span><span>        </span><span style=color:#a0a1a7;>// Throw error
</span><span>        </span><span style=color:#a626a4;>throw </span><span style=color:#e45649;>parsedResponse</span><span>;
</span><span>      }
</span><span>
</span><span>      </span><span style=color:#a0a1a7;>// Request succeeded
</span><span>      </span><span style=color:#a626a4;>return </span><span style=color:#e45649;>parsedResponse</span><span>;
</span><span>    })
</span><span>    .</span><span style=color:#0184bc;>catch</span><span>(</span><span style=color:#e45649;>error </span><span style=color:#a626a4;>=> </span><span>{
</span><span>      </span><span style=color:#a0a1a7;>// Throw custom API error
</span><span>      </span><span style=color:#a0a1a7;>// If response exists it means HTTP error occured
</span><span>      </span><span style=color:#a626a4;>if </span><span>(</span><span style=color:#e45649;>response</span><span>) {
</span><span>        </span><span style=color:#a626a4;>throw new </span><span>ApiError(</span><span style=color:#50a14f;>`Request failed with status ${ </span><span style=color:#e45649;>response</span><span style=color:#50a14f;>.status }.`</span><span>, </span><span style=color:#e45649;>error</span><span>, </span><span style=color:#e45649;>response</span><span>.status);
</span><span>      } </span><span style=color:#a626a4;>else </span><span>{
</span><span>        </span><span style=color:#a626a4;>throw new </span><span>ApiError(</span><span style=color:#e45649;>error</span><span>.</span><span style=color:#0184bc;>toString</span><span>(), </span><span style=color:#c18401;>null</span><span>, </span><span style=color:#50a14f;>'REQUEST_FAILED'</span><span>);
</span><span>      }
</span><span>    });
</span><span>};
</span><span>
</span><span style=color:#a626a4;>export default </span><span style=color:#e45649;>fetchResource</span><span>;
</span></code></pre><h2 id=usage>Usage<a aria-label="Anchor link for: usage" title="Anchor link for: usage" class=header-anchor href=#usage><img aria-hidden=true src=/img/link.svg></a></h2><p><code>fetchResource</code> accepts two arguments, mandatory URL and optional options to be passed to the <code>fetch</code> request. If you wrap each API request in a function with it's specific options it will be easier to maintain.<p>Few examples:<pre class=language-js data-lang=js style=background-color:#fafafa;color:#383a42;><code class=language-js data-lang=js><span style=color:#a0a1a7;>// Simple get request
</span><span style=color:#a626a4;>function </span><span style=color:#0184bc;>getUsers</span><span>() {
</span><span>  </span><span style=color:#a626a4;>return </span><span style=color:#0184bc;>fetchResource</span><span>(</span><span style=color:#50a14f;>'users'</span><span>);
</span><span>}
</span><span>
</span><span style=color:#a0a1a7;>// Post request with payload
</span><span style=color:#a626a4;>function </span><span style=color:#0184bc;>signIn</span><span>(</span><span style=color:#e45649;>username</span><span>, </span><span style=color:#e45649;>password</span><span>) {
</span><span>  </span><span style=color:#a626a4;>return </span><span style=color:#0184bc;>fetchResource</span><span>(</span><span style=color:#50a14f;>'signin'</span><span>, {
</span><span>    method: </span><span style=color:#50a14f;>'POST'</span><span>,
</span><span>    body: {
</span><span>      </span><span style=color:#e45649;>username</span><span>,
</span><span>      </span><span style=color:#e45649;>password</span><span>,
</span><span>    },
</span><span>  });
</span><span>}
</span><span>
</span><span style=color:#a0a1a7;>// Put request, with file data and custom headers
</span><span style=color:#a626a4;>function </span><span style=color:#0184bc;>uploadAvatar</span><span>(</span><span style=color:#e45649;>userId</span><span>, </span><span style=color:#e45649;>file</span><span>) {
</span><span>  </span><span style=color:#a626a4;>return </span><span style=color:#0184bc;>fetchResource</span><span>(</span><span style=color:#50a14f;>`users/${ </span><span style=color:#e45649;>userId </span><span style=color:#50a14f;>}/avatar/`</span><span>, {
</span><span>    method: </span><span style=color:#50a14f;>'PUT'</span><span>,
</span><span>    body: </span><span style=color:#e45649;>file</span><span>,
</span><span>    headers: {
</span><span>      </span><span style=color:#50a14f;>'Content-Type'</span><span>: </span><span style=color:#e45649;>file</span><span>.type,
</span><span>    },
</span><span>  });
</span><span>}
</span></code></pre><p>Then you call newly created API functions, they will return a Promise, so you need to define <code>then</code> (and <code>catch</code> for errors).<pre class=language-js data-lang=js style=background-color:#fafafa;color:#383a42;><code class=language-js data-lang=js><span style=color:#0184bc;>getUsers</span><span>()
</span><span>  .</span><span style=color:#0184bc;>then</span><span>(</span><span style=color:#e45649;>userData </span><span style=color:#a626a4;>=> </span><span>{
</span><span>    </span><span style=color:#a0a1a7;>// Do something with the "data"
</span><span>  })
</span><span>  .</span><span style=color:#0184bc;>catch</span><span>(</span><span style=color:#e45649;>error </span><span style=color:#a626a4;>=> </span><span>{
</span><span>    </span><span style=color:#a0a1a7;>// Handle error
</span><span>    </span><span style=color:#a0a1a7;>// error.message (error text)
</span><span>    </span><span style=color:#a0a1a7;>// error.status (HTTTP status or 'REQUEST_FAILED')
</span><span>    </span><span style=color:#a0a1a7;>// error.response (text, object or null)
</span><span>  })
</span></code></pre><h3 id=demo>Demo<a aria-label="Anchor link for: demo" title="Anchor link for: demo" class=header-anchor href=#demo><img aria-hidden=true src=/img/link.svg></a></h3><p>I've cooked a small demo to show it in practice, in which I used free <a href=https://swapi.co>Star Wars API</a>.</p><iframe src="//codepen.io/stanko/embed/preview/LOoPQp/?height=400&theme-id=light&default-tab=result" allowfullscreen allowtransparency frameborder=no height=400px scrolling=no>See the Pen <a href=http://codepen.io/stanko/pen/LOoPQp/>Simple JavaScript API wrapper demo</a> by Stanko (<a href=http://codepen.io/stanko>@stanko</a>) on <a href=http://codepen.io>CodePen</a>.</iframe><p>Feel free to play with it <a href="https://codepen.io/stanko/pen/LOoPQp?editors=0110">on CodePen</a>.</div><div class=sharing><div class=h4>Share on:</div><div class=sharing__buttons><a class="sharing__button sharing__button--hn" href="http://news.ycombinator.com/submitlink?u=https%3A//muffinman.io/blog/simple-javascript-api-wrapper/&t=Simple%20JavaScript%20API%20wrapper" title="Share post on Hacker News" rel=nofollow target=_blank> <svg viewbox="0 0 106 137" aria-hidden=true xmlns=http://www.w3.org/2000/svg> <path d="M44.374 82.746.433.432h20.081l25.848 52.092c.398.928.862 1.889 1.392 2.883.53.994.994 2.022 1.391 3.082.266.398.464.762.597 1.094.133.33.265.63.398.894a65.643 65.643 0 0 1 1.79 3.877c.53 1.26.993 2.42 1.39 3.48a601.604 601.604 0 0 1 3.48-7.257c1.26-2.585 2.552-5.27 3.877-8.053L86.923.432h18.69L61.273 83.74v53.087h-16.9V82.746h.001Z"/> </svg> </a><a class="sharing__button sharing__button--twitter" href="http://twitter.com/share?text=Simple%20JavaScript%20API%20wrapper&url=https%3A//muffinman.io/blog/simple-javascript-api-wrapper/" title="Share post on Twitter" rel=nofollow target=_blank> <svg viewbox="0 0 24 24" aria-hidden=true xmlns=http://www.w3.org/2000/svg> <path d="M23.444 4.834c-.814.363-1.5.375-2.228.016.938-.562.981-.957 1.32-2.019-.878.521-1.851.9-2.886 1.104a4.545 4.545 0 0 0-7.742 4.145 12.897 12.897 0 0 1-9.366-4.748 4.525 4.525 0 0 0-.615 2.285c0 1.577.803 2.967 2.021 3.782a4.527 4.527 0 0 1-2.057-.568l-.001.057a4.547 4.547 0 0 0 3.646 4.456 4.575 4.575 0 0 1-2.053.079 4.551 4.551 0 0 0 4.245 3.155A9.138 9.138 0 0 1 1 18.459 12.865 12.865 0 0 0 7.966 20.5c8.358 0 12.928-6.924 12.928-12.929 0-.198-.003-.393-.012-.588.887-.64 1.953-1.237 2.562-2.149z"/> </svg> </a><a class="sharing__button sharing__button--reddit" href="http://www.reddit.com/submit?url=https%3A//muffinman.io/blog/simple-javascript-api-wrapper/&title=Simple%20JavaScript%20API%20wrapper" title="Share post on reddit" rel=nofollow target=_blank> <svg viewbox="0 0 24 24" aria-hidden=true xmlns=http://www.w3.org/2000/svg> <path d="M2.204 14.049c-.06.276-.091.56-.091.847 0 3.443 4.402 6.249 9.814 6.249 5.41 0 9.812-2.804 9.812-6.249 0-.274-.029-.546-.082-.809l-.015-.032a.456.456 0 0 1-.029-.165c-.302-1.175-1.117-2.241-2.296-3.103a.422.422 0 0 1-.126-.07c-.026-.02-.045-.042-.067-.064-1.792-1.234-4.356-2.008-7.196-2.008-2.815 0-5.354.759-7.146 1.971a.397.397 0 0 1-.179.124c-1.206.862-2.042 1.937-2.354 3.123a.454.454 0 0 1-.037.171l-.008.015zm9.773 5.441c-1.794 0-3.057-.389-3.863-1.197a.45.45 0 0 1 0-.632.47.47 0 0 1 .635 0c.63.629 1.685.943 3.228.943 1.542 0 2.591-.3 3.219-.929a.463.463 0 0 1 .629 0 .482.482 0 0 1 0 .645c-.809.808-2.065 1.198-3.862 1.198l.014-.028zm-3.606-7.573c-.914 0-1.677.765-1.677 1.677 0 .91.763 1.65 1.677 1.65s1.651-.74 1.651-1.65c0-.912-.739-1.677-1.651-1.677zm7.233 0c-.914 0-1.678.765-1.678 1.677 0 .91.764 1.65 1.678 1.65s1.651-.74 1.651-1.65c0-.912-.739-1.677-1.651-1.677zm4.548-1.595c1.037.833 1.8 1.821 2.189 2.904a1.818 1.818 0 0 0-2.189-2.902v-.002zM2.711 9.963a1.82 1.82 0 0 0-1.173 3.207c.401-1.079 1.172-2.053 2.213-2.876a1.82 1.82 0 0 0-1.039-.329v-.002zm9.217 12.079c-5.906 0-10.709-3.205-10.709-7.142 0-.275.023-.544.068-.809A2.723 2.723 0 0 1 0 11.777a2.725 2.725 0 0 1 2.725-2.713 2.7 2.7 0 0 1 1.797.682c1.856-1.191 4.357-1.941 7.112-1.992l1.812-5.524.404.095s.016 0 .016.002l4.223.993a2.237 2.237 0 0 1 4.296.874c0 1.232-1.003 2.234-2.231 2.234s-2.23-1.004-2.23-2.23l-3.851-.912-1.467 4.477c2.65.105 5.047.854 6.844 2.021a2.663 2.663 0 0 1 1.833-.719 2.716 2.716 0 0 1 2.718 2.711c0 .987-.54 1.886-1.378 2.365.029.255.059.494.059.749-.015 3.938-4.806 7.143-10.72 7.143l-.034.009zm8.179-19.187a1.339 1.339 0 1 0 0 2.678c.732 0 1.33-.6 1.33-1.334 0-.733-.598-1.332-1.347-1.332l.017-.012z"/> </svg> </a></div></div></div><div class=post__bottom><div class=container><div class=related-posts><h2 class="h3 related-posts__title">Related Posts</h2><a class=related-posts__post href=https://muffinman.io/blog/catching-the-blur-event-on-an-element-and-its-children/> <div class=related-posts__post-title>Catching the blur event on an element and its children<svg viewbox="0 0 30 20" aria-hidden=true class=post-arrow xmlns=http://www.w3.org/2000/svg> <path d="M 0 10 30 10 20 0 30 10 20 20"/> </svg></div> <div class=related-posts__date>19. September 2021</div> </a><a class=related-posts__post href=https://muffinman.io/blog/three-js-extrude-svg-path/> <div class=related-posts__post-title>Three.js extrude SVG path<svg viewbox="0 0 30 20" aria-hidden=true class=post-arrow xmlns=http://www.w3.org/2000/svg> <path d="M 0 10 30 10 20 0 30 10 20 20"/> </svg></div> <div class=related-posts__date>18. December 2019</div> </a><a class=related-posts__post href=https://muffinman.io/blog/javascript-keyboard-easter-egg/> <div class=related-posts__post-title>JavaScript keyboard easter egg<svg viewbox="0 0 30 20" aria-hidden=true class=post-arrow xmlns=http://www.w3.org/2000/svg> <path d="M 0 10 30 10 20 0 30 10 20 20"/> </svg></div> <div class=related-posts__date>01. December 2019</div> </a></div><div class=comments><h2 class="h3 comments__title" id=comments>Comments (4)</h2><div><div class=comment id=comment-fe812580-db51-11e7-95c9-2dc45a1a7a05><div class=comment__top><img src="https://www.gravatar.com/avatar/b6d52af70ff36f7a38d98eddbaaba912?d=mm&r=g" class=comment__avatar><div class=comment__right><div class="comment__name h5">brian</div><div class=comment__date>07. Dec 2017, 13:24</div></div></div><div class=comment__message><p>what's the difference from using this polyfill?<p>https://github.com/github/fetch</div></div><div class=comment id=comment-c93c4490-db56-11e7-95c9-2dc45a1a7a05><div class=comment__top><div class="comment__avatar comment__avatar--mm"><svg viewbox="0 0 40 20" aria-hidden=true class=logo xmlns=http://www.w3.org/2000/svg> <lineargradient id=logo-gradient> <stop offset=0% stop-color=var(--gradient-color-1) /> <stop offset=70% stop-color=var(--gradient-color-2) /> </lineargradient> <path d="M19.79.5h-2.603c-2.56 0-5.04 1.377-6.003 2.754C10.22 1.877 7.742.5 5.181.5H.5v19h4.681V5.181c1.79.083 3.855 1.35 3.855 3.993V19.5h4.296V9.174c0-2.644 2.065-3.91 3.855-3.993V19.5h5.204V5.181c1.79.083 3.855 1.35 3.855 3.993V19.5h4.296V9.174c0-2.644 2.065-3.91 3.855-3.993V19.5h4.681V.5h-4.68c-2.562 0-5.04 1.377-6.004 2.754C27.43 1.877 24.952.5 22.391.5Z" fill=url(#logo-gradient) stroke-linecap=round stroke-linejoin=round stroke-width=2px vector-effect=non-scaling-stroke /> </svg></div><div class=comment__right><div class="comment__name h5">Stanko</div><div class=comment__date>07. Dec 2017, 13:59</div></div></div><div class=comment__message><p>Hello brian,<p>If you are asking about <a href=https://www.npmjs.com/package/isomorphic-fetch>isomorphic-fetch</a>, it is actually built on top of the github's polyfill, just made universal (it can run on the server).<p>Then if you are asking about my <code> fetchResource</code> function, it is just light wrapper for handling API requests in frontend applications. It is easy to hook it up with application logic (redux for example) as it handles common logic and gives more descriptive errors.<p>Cheers!</div></div><div class=comment id=comment-189dfb90-4a61-11e8-8340-6b0f2402824f><div class=comment__top><img src="https://www.gravatar.com/avatar/c411b9fd7860d80aa4e5cf5b187e5095?d=mm&r=g" class=comment__avatar><div class=comment__right><div class="comment__name h5">Wiggers</div><div class=comment__date>27. Apr 2018, 21:22</div></div></div><div class=comment__message><p>Great job!</div></div><div class=comment id=comment-a657d930-afe8-11ea-89d9-9d0c27914563><div class=comment__top><img src="https://www.gravatar.com/avatar/8cbdecf8aa4305f84db9151d1d3b75cb?d=mm&r=g" class=comment__avatar><div class=comment__right><div class="comment__name h5">LKG</div><div class=comment__date>16. Jun 2020, 15:47</div></div></div><div class=comment__message><p>Thank you. I will be using this on a future project of mine. I have been looking for a wrapper class that handles errors</div></div></div></div></div></div></section><footer class=footer><div class="container footer__content"><a class=footer__rss-link href=/atom.xml target=_blank> <svg viewbox="0 0 8 8" aria-hidden=true xmlns=http://www.w3.org/2000/svg> <g fill=currentColor transform=matrix(1.3329835,0,0,1.3333333,-0.12812669,-2.6739007)> <ellipse cx=0.88595736 cy=7.2168303 rx=0.78983712 ry=0.78859526 /> <path d="m 0.09769498,5.0054256 a 3,3 0 0 1 3.00000002,3 h 1 a 4,4 0 0 0 -4.00000002,-4 z"/> <path d="m 0.09769498,3.0054256 a 5,5 0 0 1 5.00000002,5 h 1 a 6,6 0 0 0 -6.00000002,-6 z"/> </g> </svg> RSS Feed </a><div class=footer__text><a aria-label=Home class=footer__logo-link href=/> <svg viewbox="0 0 40 20" aria-hidden=true class=logo xmlns=http://www.w3.org/2000/svg> <lineargradient id=logo-gradient> <stop offset=0% stop-color=var(--gradient-color-1) /> <stop offset=70% stop-color=var(--gradient-color-2) /> </lineargradient> <path d="M19.79.5h-2.603c-2.56 0-5.04 1.377-6.003 2.754C10.22 1.877 7.742.5 5.181.5H.5v19h4.681V5.181c1.79.083 3.855 1.35 3.855 3.993V19.5h4.296V9.174c0-2.644 2.065-3.91 3.855-3.993V19.5h5.204V5.181c1.79.083 3.855 1.35 3.855 3.993V19.5h4.296V9.174c0-2.644 2.065-3.91 3.855-3.993V19.5h4.681V.5h-4.68c-2.562 0-5.04 1.377-6.004 2.754C27.43 1.877 24.952.5 22.391.5Z" fill=url(#logo-gradient) stroke-linecap=round stroke-linejoin=round stroke-width=2px vector-effect=non-scaling-stroke /> </svg> </a><p>© 2016-2022. All rights reserved.<p>Written with ♡ by Stanko Tadić. Made in Serbia.</div><nav class="nav nav--footer"><a class=nav__item href=/>Home</a><span aria-hidden=true>/</span><a class=nav__item href=/archive/> Archive </a><span aria-hidden=true>/</span><a class="nav__item nav__item--with-icon" title="On my Instagram profile" href=https://instagram.com/muffinman_io/ rel=noopener target=_blank> Art <svg viewbox="0 0 20 20" aria-hidden=true class=nav__external-icon height=10 width=10 xmlns=http://www.w3.org/2000/svg> <g fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2.5> <path d="M 0 20 20 0 M 8 0 20 0 20 12"/> </g> </svg> </a><span aria-hidden=true>/</span><a class=nav__item href=/about/> About </a><span aria-hidden=true>/</span><button class="nav__item nav__item--with-icon" data-micromodal-trigger=modal-menu>Search <svg viewbox="0 0 20 32" aria-hidden=true class=nav__search-icon height=16 width=10 xmlns=http://www.w3.org/2000/svg> <g fill=none stroke=currentColor stroke-linecap=round stroke-width=3> <circle cx=10 cy=10 r=10 /> <path d="M 10 20 L 10 32"/> </g> </svg></button></nav></div></footer></div><div aria-hidden=true class=modal id=modal-menu><div class=modal__overlay><div><div aria-hidden=true class=modal__shadow></div><div aria-labelledby=modal-menu-title aria-modal=true class=modal__container role=dialog><main class=modal__content id=modal-menu-content><h2 class=sr-only id=modal-menu-title>Menu and search</h2><div class=menu><div class=container><a aria-label=Home class=menu__logo href=/> <svg viewbox="0 0 40 20" aria-hidden=true class=logo xmlns=http://www.w3.org/2000/svg> <lineargradient id=logo-gradient> <stop offset=0% stop-color=var(--gradient-color-1) /> <stop offset=70% stop-color=var(--gradient-color-2) /> </lineargradient> <path d="M19.79.5h-2.603c-2.56 0-5.04 1.377-6.003 2.754C10.22 1.877 7.742.5 5.181.5H.5v19h4.681V5.181c1.79.083 3.855 1.35 3.855 3.993V19.5h4.296V9.174c0-2.644 2.065-3.91 3.855-3.993V19.5h5.204V5.181c1.79.083 3.855 1.35 3.855 3.993V19.5h4.296V9.174c0-2.644 2.065-3.91 3.855-3.993V19.5h4.681V.5h-4.68c-2.562 0-5.04 1.377-6.004 2.754C27.43 1.877 24.952.5 22.391.5Z" fill=url(#logo-gradient) stroke-linecap=round stroke-linejoin=round stroke-width=2px vector-effect=non-scaling-stroke /> </svg> </a><button aria-label=Close class=menu__close data-micromodal-close><span></span> <span></span></button></div></div><div class=modal__top><div class=container><label class=sr-only for=search>Search</label><input class=search__input id=search placeholder=Search></div></div><div class=modal__bottom><div class=container><div class=modal-nav><a class=h1 href=/archive/> Archive </a><a title="On my Instagram profile" class=h1 href=https://instagram.com/muffinman_io/ rel=noopener target=_blank> Art </a><a class=h1 href=/about/> About </a><a class=h1 href=/atom.xml> RSS Feed </a><a class=h1 href=https://github.com/stanko/ rel=noopener target=_blank> GitHub </a></div></div><div class=search__results></div><main><div></div><div></div><script src=/js/search-data.js></script><script src=/js/app.js></script><script>if (window.location.hostname !== 'localhost' && window.location.hostname.search('.local') > -1 && window.location.hostname !== '0.0.0.0') {
      (function() {
        window.counter = 'https://muffinman_io.goatcounter.com/count';

        var script = document.createElement('script');
        script.async = 1;
        script.src = '//gc.zgo.at/count.js';
        var ins = document.getElementsByTagName('script')[0];
        ins.parentNode.insertBefore(script, ins);
      })();
    }</script>