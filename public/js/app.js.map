{"version":3,"sources":["app.js"],"names":[],"mappings":"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","file":"app.js","sourcesContent":["const commentForm = document.querySelector('.CommentForm');\nconst commentFormInputs = document.querySelectorAll('.CommentForm-input');\nconst slugInput = document.querySelector('.CommentForm-input--slug');\nconst optionsSlugInput = document.querySelector('.CommentForm-input--optionsSlug');\nconst nameInput = document.querySelector('.CommentForm-input--name');\nconst lastNameInput = document.querySelector('.CommentForm-input--lastName');\nconst emailInput = document.querySelector('.CommentForm-input--email');\nconst messageInput = document.querySelector('.CommentForm-input--message');\nconst errorMessagesDiv = document.querySelector('.CommentForm-errorMessages');\nconst sendFailedDiv = document.querySelector('.CommentForm-sendFailed');\nconst sendSucceededDiv = document.querySelector('.CommentForm-sendSucceeded');\nconst overlayDiv = document.querySelector('.CommentForm-overlay');\n\nfunction post(url, data, callback, errorCallback) {\n  const xhr = new XMLHttpRequest();\n  xhr.open('POST', url);\n  xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n  xhr.onload = function() {\n    if (xhr.status === 200) {\n      callback(xhr.responseText);\n    } else if (xhr.status !== 200) {\n      errorCallback(xhr.responseText);\n    }\n  };\n  xhr.send(encodeURI(data));\n}\n\n\ncommentForm.addEventListener('submit', (e) => {\n  e.preventDefault();\n  errorMessagesDiv.innerHTML = '';\n  sendFailedDiv.style.display = 'none';\n  sendSucceededDiv.style.display = 'none';\n\n  const slug = slugInput.value.trim();\n  const optionsSlug = optionsSlugInput.value.trim();\n  const name = nameInput.value.trim();\n  const lastName = lastNameInput.value.trim();\n  const email = emailInput.value.trim();\n  const message = messageInput.value.trim();\n\n  let error = false;\n  let fatalError = false;\n  const messages = [];\n\n  if (slug === '' || slug !== optionsSlug || lastName !== '') {\n    fatalError = true;\n  }\n\n  if (name.length < 2) {\n    error = true;\n    messages.push('Please enter name');\n  }\n\n  if (email.search(/^[a-zA-Z0-9.!#$%&â€™*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/) === -1) {\n    error = true;\n    messages.push('Please enter valid email');\n  }\n\n  if (message.length < 2) {\n    error = true;\n    messages.push('Please enter message');\n  }\n\n  if (fatalError) {\n    return false;\n  }\n\n  if (error) {\n    errorMessagesDiv.innerHTML = messages.join('<br>');\n    return false;\n  }\n\n\n  const params = [];\n  commentFormInputs.forEach(input => {\n    params.push(`${ input.name }=${ input.value }`);\n  });\n\n  overlayDiv.style.display = 'block';\n\n  post(\n    e.target.getAttribute('data-action'),\n    params.join('&'),\n    function(text){\n      commentForm.reset();\n      sendSucceededDiv.style.display = 'block';\n      overlayDiv.style.display = 'none';\n    },\n    function(text){\n      sendFailedDiv.style.display = 'block';\n      overlayDiv.style.display = 'none';\n    }\n  );\n});\n\n/*\n * Fuzzy\n * https://github.com/myork/fuzzy\n *\n * Copyright (c) 2012 Matt York\n * Licensed under the MIT license.\n */\n\n(function() {\n\nvar root = this;\n\nvar fuzzy = {};\n\nwindow.fuzzy = fuzzy;\n\n// prefix & suffix for score calculation\n// need this in order to split matching & scoring in two phases\nvar PREFIX = '<strong>';\nvar SUFFIX = '</strong>';\n\nvar calculateScore = function(string) {\n  return string.split(PREFIX).length - 1 + (string.split(SUFFIX + PREFIX).length - 1) * 10;\n};\n\nvar recursiveMatch = function(pattern, string, compareString) {\n  if (pattern.length === 0 || string.length === 0 || pattern.length > string.length) {\n    return [string];\n  }\n\n  var result = [];\n\n  for(var idx = 0; idx < string.length; idx++) {\n    if (pattern[0] === compareString[idx]) {\n      var ch = PREFIX + string[idx] + SUFFIX;\n\n      var arr = recursiveMatch(pattern.slice(1), string.slice(idx + 1), compareString.slice(idx + 1));\n\n      arr = arr.map(function(str){\n        return string.slice(0, idx) + ch + str;\n      });\n\n      result[result.length] = arr;\n    }\n  }\n\n  return [].concat.apply([], result); // flatten\n};\n\n// Return all elements of `array` that have a fuzzy\n// match against `pattern`.\nfuzzy.simpleFilter = function(pattern, array) {\n  return array.filter(function(string) {\n    return fuzzy.test(pattern, string);\n  });\n};\n\n// Does `pattern` fuzzy match `string`?\nfuzzy.test = function(pattern, string) {\n  return fuzzy.match(pattern, string) !== null;\n};\n\nfuzzy.match = function(pattern, string, opts) {\n  opts = opts || {};\n\n  /**\n    pre - prefix\n    post - suffix\n    compareString - String to compare against. This might be a\n      lowercase version of the raw string\n  **/\n  var pre = opts.pre || '<strong>'\n    , post = opts.post || '</strong>'\n    , compareString = opts.caseSensitive && string || string.toLowerCase();\n\n  pattern = opts.caseSensitive && pattern || pattern.toLowerCase();\n\n  var result = recursiveMatch(pattern, string, compareString)\n    .filter(function(el) {\n      return el.split(PREFIX).length - 1 === pattern.length;\n    });\n\n  if (result.length === 0) {\n    return null;\n  }\n\n  return result\n    .map(function(el) {\n      return {\n        rendered: el.split(PREFIX).join(pre).split(SUFFIX).join(post),\n        score: calculateScore(el),\n      };\n    })\n\n    .reduce(function(prev, next) {\n      return prev.score > next.score ? prev : next;\n    });\n}\n\n// The normal entry point. Filters `arr` for matches against `pattern`.\n// It returns an array with matching values of the type:\n//\n//     [{\n//         string:   '<b>lah' // The rendered string\n//       , index:    2        // The index of the element in `arr`\n//       , original: 'blah'   // The original element in `arr`\n//     }]\n//\n// `opts` is an optional argument bag. Details:\n//\n//    opts = {\n//        // string to put before a matching character\n//        pre:     '<b>'\n//\n//        // string to put after matching character\n//      , post:    '</b>'\n//\n//        // Optional function. Input is an entry in the given arr`,\n//        // output should be the string to test `pattern` against.\n//        // In this example, if `arr = [{crying: 'koala'}]` we would return\n//        // 'koala'.\n//      , extract: function(arg) { return arg.crying; }\n//    }\nfuzzy.filter = function(pattern, arr, opts) {\n  if(!arr || arr.length === 0) {\n    return []\n  }\n  if (typeof pattern !== 'string') {\n    return arr\n  }\n  opts = opts || {};\n  return arr\n    .reduce(function(prev, element, idx, arr) {\n      var str = element;\n      if(opts.extract) {\n        str = opts.extract(element);\n      }\n      var rendered = fuzzy.match(pattern, str, opts);\n      if(rendered != null) {\n        prev[prev.length] = {\n            string: rendered.rendered\n          , score: rendered.score\n          , index: idx\n          , original: element\n        };\n      }\n      return prev;\n    }, [])\n\n    // Sort by score. Browsers are inconsistent wrt stable/unstable\n    // sorting, so force stable by using the index in the case of tie.\n    // See http://ofb.net/~sethml/is-sort-stable.html\n    .sort(function(a,b) {\n      var compare = b.score - a.score;\n      if(compare) return compare;\n      return a.index - b.index;\n    });\n};\n\n\n}());\n\nconst options = {\n  extract: function(el) { return el.title; }\n};\n\nconst searchInput = document.querySelector('.Search-input');\nconst searchResults = document.querySelector('.Search-results');\n\nlet prevSearch = '';\n\nconst MIN_CHARACTERS = 2;\n\nfunction renderResult(title, url) {\n  return `<div><a href=\"${ url }\">${ title }</a></div>`;\n}\n\nsearchInput.addEventListener('keyup', function() {\n  const newSearch = searchInput.value.trim();\n\n  if (prevSearch === newSearch) {\n    return;\n  }\n\n  if (newSearch.length < MIN_CHARACTERS) {\n    searchResults.innerHTML = '';\n    return;\n  }\n\n  const results = fuzzy.filter(newSearch, posts, options);\n  const html = results.map(result => renderResult(result.string, result.original.url)).join('');\n\n  prevSearch = newSearch;\n  searchResults.innerHTML = html;\n});\n"],"sourceRoot":"/source/"}